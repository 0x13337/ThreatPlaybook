2020-04-25 15:18:53.958 | ERROR    | tp_api.app:change_password:80 - Change password exception. User passwords dont match OR old password is wrong for user admin@admin.com
2020-04-25 15:19:36.459 | ERROR    | tp_api.app:change_password:80 - Change password exception. User passwords dont match OR old password is wrong for user admin@admin.com
2020-04-25 15:20:03.895 | ERROR    | tp_api.app:change_password:80 - Change password exception. User passwords dont match OR old password is wrong for user admin@admin.com
2020-04-25 15:23:42.732 | INFO     | tp_api.app:change_password:66 - Changed password for user admin@admin.com
2020-04-25 20:51:41.906 | INFO     | tp_api.app:change_password:79 - Changed password for user admin@admin.com
2020-04-25 20:52:24.664 | INFO     | tp_api.app:change_password:79 - Changed password for user admin@admin.com
2020-04-25 20:52:24.882 | INFO     | tp_api.app:login:134 - User admin@admin.com successfully logged in
2020-04-25 21:15:19.994 | INFO     | tp_api.app:change_password:99 - Changed password for user admin@admin.com
2020-04-25 21:15:20.211 | INFO     | tp_api.app:login:154 - User 'admin@admin.com' successfully logged in
2020-04-25 21:15:36.239 | INFO     | tp_api.app:change_password:99 - Changed password for user admin@admin.com
2020-04-25 21:15:36.457 | INFO     | tp_api.app:login:154 - User 'admin@admin.com' successfully logged in
2020-04-25 21:18:29.774 | INFO     | tp_api.app:change_password:99 - Changed password for user admin@admin.com
2020-04-25 21:18:29.992 | INFO     | tp_api.app:login:154 - User 'admin@admin.com' successfully logged in
2020-04-25 21:19:20.108 | INFO     | tp_api.app:change_password:99 - Changed password for user admin@admin.com
2020-04-25 21:19:20.329 | INFO     | tp_api.app:login:154 - User 'admin@admin.com' successfully logged in
2020-04-25 21:19:46.257 | INFO     | tp_api.app:change_password:99 - Changed password for user admin@admin.com
2020-04-25 21:19:46.476 | INFO     | tp_api.app:login:154 - User 'admin@admin.com' successfully logged in
2020-04-25 21:19:56.662 | INFO     | tp_api.app:change_password:99 - Changed password for user admin@admin.com
2020-04-25 21:19:56.896 | INFO     | tp_api.app:login:154 - User 'admin@admin.com' successfully logged in
2020-04-25 21:20:10.551 | INFO     | tp_api.app:change_password:99 - Changed password for user admin@admin.com
2020-04-25 21:20:10.769 | INFO     | tp_api.app:login:154 - User 'admin@admin.com' successfully logged in
2020-04-25 21:27:12.033 | INFO     | __main__:login:156 - User 'admin@admin.com' successfully logged in
2020-04-25 21:27:32.607 | ERROR    | __main__:inner:43 - name 'token' is not defined
Traceback (most recent call last):
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/threading.py", line 885, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1076b1d08>
    └ <Thread(Thread-4, started daemon 123145442373632)>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/threading.py", line 917, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1076b1ae8>
    └ <Thread(Thread-4, started daemon 123145442373632)>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/threading.py", line 865, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-4, started daemon 123145442373632)>
    │    │        │    └ (<socket.socket fd=9, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    │        └ <Thread(Thread-4, started daemon 123145442373632)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x1089f57f0>>
    └ <Thread(Thread-4, started daemon 123145442373632)>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 60320)
    │    │              └ <socket.socket fd=9, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('1...
    │    └ <function BaseServer.finish_request at 0x107e8f048>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x1089f57f0>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x1089f57f0>
    │    │                   │        └ ('127.0.0.1', 60320)
    │    │                   └ <socket.socket fd=9, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('1...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x1089f57f0>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x10806c620>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x1089fceb8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x1089fceb8>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x107fc3d08>
    └ <class 'http.server.BaseHTTPRequestHandler'>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x10806c7b8>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x1089fceb8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x10806c598>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x1089fceb8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x1089535f8>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x1089f57f0>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x1089fceb8>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x108a02f28>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x1089bcb10>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x108a02c80>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=9>, 'wsgi.errors': <_io.TextIOWrap...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x1089535f8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x108a02c80>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=9>, 'wsgi.errors': <_io.TextIOWrap...
           │    └ <function Flask.wsgi_app at 0x1082b8e18>
           └ <Flask 'app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x1082b8598>
               └ <Flask 'app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x1082b8510>
         └ <Flask 'app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://localhost:5000/' [GET]>
           │    │              │    └ 'mytest'
           │    │              └ <Rule '/' (HEAD, GET, OPTIONS) -> mytest>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x10893fae8>, ...
           └ <Flask 'app'>

> File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 39, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │             └ 'secret'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x1082d1048>>
              └ <module 'jwt' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/jwt/__ini...

NameError: name 'token' is not defined
2020-04-25 21:28:12.261 | ERROR    | __main__:inner:45 - name 'token' is not defined
Traceback (most recent call last):
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/threading.py", line 885, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x10523dd08>
    └ <Thread(Thread-2, started daemon 123145466675200)>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/threading.py", line 917, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x10523dae8>
    └ <Thread(Thread-2, started daemon 123145466675200)>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/threading.py", line 865, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-2, started daemon 123145466675200)>
    │    │        │    └ (<socket.socket fd=9, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    │        └ <Thread(Thread-2, started daemon 123145466675200)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x106580da0>>
    └ <Thread(Thread-2, started daemon 123145466675200)>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 60352)
    │    │              └ <socket.socket fd=9, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('1...
    │    └ <function BaseServer.finish_request at 0x105a19048>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x106580da0>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x106580da0>
    │    │                   │        └ ('127.0.0.1', 60352)
    │    │                   └ <socket.socket fd=9, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('1...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x106580da0>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x105bf7620>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x106588080>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x106588080>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x105b4ed08>
    └ <class 'http.server.BaseHTTPRequestHandler'>
  File "/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x105bf77b8>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x106588080>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x105bf7598>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x106588080>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x1064de400>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x106580da0>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x106588080>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x10658dbf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x106546a98>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x10658db70>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=9>, 'wsgi.errors': <_io.TextIOWrap...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x1064de400>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x10658db70>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=9>, 'wsgi.errors': <_io.TextIOWrap...
           │    └ <function Flask.wsgi_app at 0x105e44e18>
           └ <Flask 'app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x105e44598>
               └ <Flask 'app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x105e44510>
         └ <Flask 'app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://localhost:5000/' [GET]>
           │    │              │    └ 'mytest'
           │    │              └ <Rule '/' (HEAD, OPTIONS, GET) -> mytest>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x1064c9ae8>, ...
           └ <Flask 'app'>

> File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 39, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │             └ 'secret'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x105e4dfd0>>
              └ <module 'jwt' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/jwt/__ini...

NameError: name 'token' is not defined
2020-04-26 11:03:10.647 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 11:03:10.868 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 11:03:18.287 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 11:03:18.501 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 11:04:13.139 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 11:04:13.361 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 11:04:34.412 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 11:04:34.632 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 11:05:15.384 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 11:05:15.602 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 11:05:15.615 | INFO     | tp_api.app:create_project:188 - Successfully created project test-project-uKbkImowqkn4_RT_1lt_J-06fULuz21KUg835AJQSV4
2020-04-26 11:05:31.676 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 11:05:31.896 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 11:05:31.912 | INFO     | tp_api.app:create_project:188 - Successfully created project test-project-Ec7raSt3QRw
2020-04-26 13:33:39.268 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 13:33:39.488 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 13:33:39.500 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-Ki-S__p3lWU
2020-04-26 13:34:24.457 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 13:34:24.679 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 13:34:24.690 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-Pbsx3NaoPTs
2020-04-26 13:34:24.709 | ERROR    | tp_api.app:create_user_story:238 - Update failed (E11000 duplicate key error collection: threat_playbook.use_case index: hash_1 dup key: { hash: null })
Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 535, in update
    result = update_func(query, update, upsert=upsert)
             │           │      │              └ True
             │           │      └ {'$set': {'short_name': 'test-feature-57k-jGKSR1I', 'description': 'This is a test description', 'project': ObjectId('5ea5408...
             │           └ {'short_name': 'test-feature-57k-jGKSR1I'}
             └ <bound method Collection.update_one of Collection(Database(MongoClient(host=['localhost:27017'], document_class=dict, tz_awar...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 1003, in update_one
    session=session),
            └ None
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 856, in _update_retryable
    _update, session)
    │        └ None
    └ <function Collection._update_retryable.<locals>._update at 0x1094e0d08>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/mongo_client.py", line 1491, in _retryable_write
    return self._retry_with_session(retryable, func, s, None)
           │    │                   │          │     └ <pymongo.client_session.ClientSession object at 0x1095331d0>
           │    │                   │          └ <function Collection._update_retryable.<locals>._update at 0x1094e0d08>
           │    │                   └ True
           │    └ <function MongoClient._retry_with_session at 0x109177400>
           └ MongoClient(host=['localhost:27017'], document_class=dict, tz_aware=False, connect=True, read_preference=Primary())
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/mongo_client.py", line 1384, in _retry_with_session
    return func(session, sock_info, retryable)
           │    │        │          └ False
           │    │        └ SocketInfo(<socket.socket fd=7, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 62361...
           │    └ <pymongo.client_session.ClientSession object at 0x1095331d0>
           └ <function Collection._update_retryable.<locals>._update at 0x1094e0d08>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 852, in _update
    retryable_write=retryable_write)
                    └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 823, in _update
    _check_write_command_response(result)
    │                             └ {'n': 0, 'nModified': 0, 'writeErrors': [{'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, '...
    └ <function _check_write_command_response at 0x108f7dc80>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/helpers.py", line 221, in _check_write_command_response
    _raise_last_write_error(write_errors)
    │                       └ [{'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, 'errmsg': 'E11000 duplicate key error col...
    └ <function _raise_last_write_error at 0x108f7db70>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/helpers.py", line 202, in _raise_last_write_error
    raise DuplicateKeyError(error.get("errmsg"), 11000, error)
          │                 │     │                     └ {'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, 'errmsg': 'E11000 duplicate key error coll...
          │                 │     └ <method 'get' of 'dict' objects>
          │                 └ {'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, 'errmsg': 'E11000 duplicate key error coll...
          └ <class 'pymongo.errors.DuplicateKeyError'>

pymongo.errors.DuplicateKeyError: E11000 duplicate key error collection: threat_playbook.use_case index: hash_1 dup key: { hash: null }


During handling of the above exception, another exception occurred:


Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/bin/py.test", line 8, in <module>
    sys.exit(main())
    │   │    └ <function main at 0x108576488>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/config/__init__.py", line 125, in main
    config=config
           └ <_pytest.config.Config object at 0x108728320>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'config': <_pytest.config.Config object at 0x108728320>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1080199d8>
           │    │         │     └ <_HookCaller 'pytest_cmdline_main'>
           │    │         └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x108662c50>>
           └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'config': <_pytest.config.Config object at 0x108728320>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x107a32268>
           └ <_pytest.config.PytestPluginManager object at 0x108662c50>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x108711c50>
                │    │    │    │                     └ <_HookCaller 'pytest_cmdline_main'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x108711c50>
                └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<_pytest.config.Config object at 0x108728320>]
          │         └ <function pytest_cmdline_main at 0x10863fc80>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 240, in pytest_cmdline_main
    return wrap_session(config, _main)
           │            │       └ <function _main at 0x10863fd08>
           │            └ <_pytest.config.Config object at 0x108728320>
           └ <function wrap_session at 0x10863fbf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 191, in wrap_session
    session.exitstatus = doit(config, session) or 0
    │       │            │    │       └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>
    │       │            │    └ <_pytest.config.Config object at 0x108728320>
    │       │            └ <function _main at 0x10863fd08>
    │       └ <ExitCode.OK: 0>
    └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 247, in _main
    config.hook.pytest_runtestloop(session=session)
    │      │    │                          └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>
    │      │    └ <_HookCaller 'pytest_runtestloop'>
    │      └ <pluggy.hooks._HookRelay object at 0x107c6eda0>
    └ <_pytest.config.Config object at 0x108728320>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1080199d8>
           │    │         │     └ <_HookCaller 'pytest_runtestloop'>
           │    │         └ <_HookCaller 'pytest_runtestloop'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x108662c50>>
           └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_runtestloop'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x107a32268>
           └ <_pytest.config.PytestPluginManager object at 0x108662c50>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10871af28>
                │    │    │    │                     └ <_HookCaller 'pytest_runtestloop'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10871af28>
                └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>]
          │         └ <function pytest_runtestloop at 0x10863fe18>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 272, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    │    │      │    │                            │              └ None
    │    │      │    │                            └ <Function test_create_feature>
    │    │      │    └ <_HookCaller 'pytest_runtest_protocol'>
    │    │      └ <pluggy.hooks._HookRelay object at 0x107c6eda0>
    │    └ <_pytest.config.Config object at 0x108728320>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_create_feature>, 'nextitem': None}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1080199d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_protocol'>
           │    │         └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x108662c50>>
           └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_create_feature>, 'nextitem': None}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x107a32268>
           └ <_pytest.config.PytestPluginManager object at 0x108662c50>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10871ae10>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_protocol'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10871ae10>
                └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>, None]
          │         └ <function pytest_runtest_protocol at 0x10863c6a8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 85, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    │               │              └ None
    │               └ <Function test_create_feature>
    └ <function runtestprotocol at 0x10863c730>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 100, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    │       │      │               │             └ True
    │       │      │               └ <Function test_create_feature>
    │       │      └ <function call_and_report at 0x10863cae8>
    │       └ <method 'append' of 'list' objects>
    └ [<TestReport 'tests/test_flask.py::test_create_feature' when='setup' outcome='passed'>]
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 186, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           │                 │     │       └ {}
           │                 │     └ 'call'
           │                 └ <Function test_create_feature>
           └ <function call_runtest_hook at 0x10863cbf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in call_runtest_hook
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       │           │             └ (<class '_pytest.outcomes.Exit'>, <class 'KeyboardInterrupt'>)
            │          │       │           └ 'call'
            │          │       └ {}
            │          └ <Function test_create_feature>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 244, in from_call
    result = func()
             └ <function call_runtest_hook.<locals>.<lambda> at 0x1094ffc80>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       └ {}
            │          └ <Function test_create_feature>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_create_feature>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1080199d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_call'>
           │    │         └ <_HookCaller 'pytest_runtest_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x108662c50>>
           └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_create_feature>}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x107a32268>
           └ <_pytest.config.PytestPluginManager object at 0x108662c50>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10871abe0>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': False, 'historic': False}
                │    └ <pluggy.hooks.HookSpec object at 0x10871abe0>
                └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>]
          │         └ <function pytest_runtest_call at 0x10863c8c8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 135, in pytest_runtest_call
    item.runtest()
    │    └ <function Function.runtest at 0x108665048>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 1479, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    │    │                                   └ <Function test_create_feature>
    │    └ <property object at 0x108619138>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'pyfuncitem': <Function test_create_feature>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1080199d8>
           │    │         │     └ <_HookCaller 'pytest_pyfunc_call'>
           │    │         └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x108662c50>>
           └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'pyfuncitem': <Function test_create_feature>}
           │    │               │     └ [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x107a32268>
           └ <_pytest.config.PytestPluginManager object at 0x108662c50>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10871a940>
                │    │    │    │                     └ <_HookCaller 'pytest_pyfunc_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10871a940>
                └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>]
          │         └ <function pytest_pyfunc_call at 0x1086417b8>
          └ <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 184, in pytest_pyfunc_call
    result = testfunction(**testargs)
             │              └ {'client': <FlaskClient <Flask 'tp_api.app'>>}
             └ <function test_create_feature at 0x1094e0840>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tests/test_flask.py", line 74, in test_create_feature
    headers={"Authorization": token},
                              └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.IX2Kw0Pi5pI9FToh8ac7DN9X9S4nZUmiJIgLZd45QP0'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1016, in post
    return self.open(*args, **kw)
           │    │     │       └ {'data': '{"short_name": "test-feature-57k-jGKSR1I", "description": "This is a test description", "project": "test-project-Pb...
           │    │     └ ('/feature/create',)
           │    └ <function FlaskClient.open at 0x1094ffea0>
           └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/testing.py", line 227, in open
    follow_redirects=follow_redirects,
                     └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 970, in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
               │    │            │       │                └ False
               │    │            │       └ <method 'copy' of 'dict' objects>
               │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
               │    └ <function Client.run_wsgi_app at 0x108ce2378>
               └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 861, in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
         │            │    │            │                 └ False
         │            │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
         │            │    └ <Flask 'tp_api.app'>
         │            └ <FlaskClient <Flask 'tp_api.app'>>
         └ <function run_wsgi_app at 0x108ce29d8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1096, in run_wsgi_app
    app_rv = app(environ, start_response)
             │   │        └ <function run_wsgi_app.<locals>.start_response at 0x1094e0b70>
             │   └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
             └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function run_wsgi_app.<locals>.start_response at 0x1094e0b70>
           │    │        └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
           │    └ <function Flask.wsgi_app at 0x108dd0d08>
           └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x108dd0488>
               └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x108dd0400>
         └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://localhost/feature/create' [POST]>
           │    │              │    └ 'create_user_story'
           │    │              └ <Rule '/feature/create' (OPTIONS, POST) -> create_user_story>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'tp_api.app'>>, 'mytest': <function mytest at 0x10945...
           └ <Flask 'tp_api.app'>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 43, in inner
    return f(*args, **kwargs)
           │  │       └ {}
           │  └ ()
           └ <function create_user_story at 0x1094e0268>

> File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 228, in create_user_story
    short_name=short_name, description=desc, project=my_proj, upsert=True,
               │                       │             └ <Project: Project object>
               │                       └ 'This is a test description'
               └ 'test-feature-57k-jGKSR1I'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 601, in update_one
    **update
      └ {'short_name': 'test-feature-57k-jGKSR1I', 'description': 'This is a test description', 'project': <Project: Project object>}
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 541, in update
    raise NotUniqueError("Update failed (%s)" % six.text_type(err))
          │                                     │   └ <class 'str'>
          │                                     └ <module 'six' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/six.py'>
          └ <class 'mongoengine.errors.NotUniqueError'>

mongoengine.errors.NotUniqueError: Update failed (E11000 duplicate key error collection: threat_playbook.use_case index: hash_1 dup key: { hash: null })
2020-04-26 13:35:00.039 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 13:35:00.257 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 13:35:00.271 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-_HFH8xrSh4U
2020-04-26 13:35:00.281 | ERROR    | tp_api.app:create_user_story:238 - Update failed (E11000 duplicate key error collection: threat_playbook.use_case index: hash_1 dup key: { hash: null })
Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 535, in update
    result = update_func(query, update, upsert=upsert)
             │           │      │              └ True
             │           │      └ {'$set': {'short_name': 'test-feature-nQMyZb6Yj2c', 'description': 'This is a test description', 'project': ObjectId('5ea540a...
             │           └ {'short_name': 'test-feature-nQMyZb6Yj2c'}
             └ <bound method Collection.update_one of Collection(Database(MongoClient(host=['localhost:27017'], document_class=dict, tz_awar...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 1003, in update_one
    session=session),
            └ None
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 856, in _update_retryable
    _update, session)
    │        └ None
    └ <function Collection._update_retryable.<locals>._update at 0x10f6bed08>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/mongo_client.py", line 1491, in _retryable_write
    return self._retry_with_session(retryable, func, s, None)
           │    │                   │          │     └ <pymongo.client_session.ClientSession object at 0x10f70a080>
           │    │                   │          └ <function Collection._update_retryable.<locals>._update at 0x10f6bed08>
           │    │                   └ True
           │    └ <function MongoClient._retry_with_session at 0x10f354400>
           └ MongoClient(host=['localhost:27017'], document_class=dict, tz_aware=False, connect=True, read_preference=Primary())
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/mongo_client.py", line 1384, in _retry_with_session
    return func(session, sock_info, retryable)
           │    │        │          └ False
           │    │        └ SocketInfo(<socket.socket fd=7, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 62379...
           │    └ <pymongo.client_session.ClientSession object at 0x10f70a080>
           └ <function Collection._update_retryable.<locals>._update at 0x10f6bed08>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 852, in _update
    retryable_write=retryable_write)
                    └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 823, in _update
    _check_write_command_response(result)
    │                             └ {'n': 0, 'nModified': 0, 'writeErrors': [{'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, '...
    └ <function _check_write_command_response at 0x10f15bc80>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/helpers.py", line 221, in _check_write_command_response
    _raise_last_write_error(write_errors)
    │                       └ [{'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, 'errmsg': 'E11000 duplicate key error col...
    └ <function _raise_last_write_error at 0x10f15bb70>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/helpers.py", line 202, in _raise_last_write_error
    raise DuplicateKeyError(error.get("errmsg"), 11000, error)
          │                 │     │                     └ {'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, 'errmsg': 'E11000 duplicate key error coll...
          │                 │     └ <method 'get' of 'dict' objects>
          │                 └ {'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, 'errmsg': 'E11000 duplicate key error coll...
          └ <class 'pymongo.errors.DuplicateKeyError'>

pymongo.errors.DuplicateKeyError: E11000 duplicate key error collection: threat_playbook.use_case index: hash_1 dup key: { hash: null }


During handling of the above exception, another exception occurred:


Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/bin/py.test", line 8, in <module>
    sys.exit(main())
    │   │    └ <function main at 0x10e756488>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/config/__init__.py", line 125, in main
    config=config
           └ <_pytest.config.Config object at 0x10e908358>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'config': <_pytest.config.Config object at 0x10e908358>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10e1f99d8>
           │    │         │     └ <_HookCaller 'pytest_cmdline_main'>
           │    │         └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10e213828>>
           └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'config': <_pytest.config.Config object at 0x10e908358>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10dd17268>
           └ <_pytest.config.PytestPluginManager object at 0x10e213828>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10e8f2c50>
                │    │    │    │                     └ <_HookCaller 'pytest_cmdline_main'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10e8f2c50>
                └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<_pytest.config.Config object at 0x10e908358>]
          │         └ <function pytest_cmdline_main at 0x10e81fc80>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 240, in pytest_cmdline_main
    return wrap_session(config, _main)
           │            │       └ <function _main at 0x10e81fd08>
           │            └ <_pytest.config.Config object at 0x10e908358>
           └ <function wrap_session at 0x10e81fbf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 191, in wrap_session
    session.exitstatus = doit(config, session) or 0
    │       │            │    │       └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>
    │       │            │    └ <_pytest.config.Config object at 0x10e908358>
    │       │            └ <function _main at 0x10e81fd08>
    │       └ <ExitCode.OK: 0>
    └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 247, in _main
    config.hook.pytest_runtestloop(session=session)
    │      │    │                          └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>
    │      │    └ <_HookCaller 'pytest_runtestloop'>
    │      └ <pluggy.hooks._HookRelay object at 0x10de4fd68>
    └ <_pytest.config.Config object at 0x10e908358>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10e1f99d8>
           │    │         │     └ <_HookCaller 'pytest_runtestloop'>
           │    │         └ <_HookCaller 'pytest_runtestloop'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10e213828>>
           └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_runtestloop'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10dd17268>
           └ <_pytest.config.PytestPluginManager object at 0x10e213828>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10e8faf60>
                │    │    │    │                     └ <_HookCaller 'pytest_runtestloop'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10e8faf60>
                └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>]
          │         └ <function pytest_runtestloop at 0x10e81fe18>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 272, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    │    │      │    │                            │              └ None
    │    │      │    │                            └ <Function test_create_feature>
    │    │      │    └ <_HookCaller 'pytest_runtest_protocol'>
    │    │      └ <pluggy.hooks._HookRelay object at 0x10de4fd68>
    │    └ <_pytest.config.Config object at 0x10e908358>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_create_feature>, 'nextitem': None}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10e1f99d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_protocol'>
           │    │         └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10e213828>>
           └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_create_feature>, 'nextitem': None}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10dd17268>
           └ <_pytest.config.PytestPluginManager object at 0x10e213828>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10e8fae10>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_protocol'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10e8fae10>
                └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>, None]
          │         └ <function pytest_runtest_protocol at 0x10e81d6a8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 85, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    │               │              └ None
    │               └ <Function test_create_feature>
    └ <function runtestprotocol at 0x10e81d730>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 100, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    │       │      │               │             └ True
    │       │      │               └ <Function test_create_feature>
    │       │      └ <function call_and_report at 0x10e81dae8>
    │       └ <method 'append' of 'list' objects>
    └ [<TestReport 'tests/test_flask.py::test_create_feature' when='setup' outcome='passed'>]
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 186, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           │                 │     │       └ {}
           │                 │     └ 'call'
           │                 └ <Function test_create_feature>
           └ <function call_runtest_hook at 0x10e81dbf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in call_runtest_hook
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       │           │             └ (<class '_pytest.outcomes.Exit'>, <class 'KeyboardInterrupt'>)
            │          │       │           └ 'call'
            │          │       └ {}
            │          └ <Function test_create_feature>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 244, in from_call
    result = func()
             └ <function call_runtest_hook.<locals>.<lambda> at 0x10f6dfc80>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       └ {}
            │          └ <Function test_create_feature>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_create_feature>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10e1f99d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_call'>
           │    │         └ <_HookCaller 'pytest_runtest_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10e213828>>
           └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_create_feature>}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10dd17268>
           └ <_pytest.config.PytestPluginManager object at 0x10e213828>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10e8fabe0>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': False, 'historic': False}
                │    └ <pluggy.hooks.HookSpec object at 0x10e8fabe0>
                └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>]
          │         └ <function pytest_runtest_call at 0x10e81d8c8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 135, in pytest_runtest_call
    item.runtest()
    │    └ <function Function.runtest at 0x10e845048>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 1479, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    │    │                                   └ <Function test_create_feature>
    │    └ <property object at 0x10e7ee0e8>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'pyfuncitem': <Function test_create_feature>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10e1f99d8>
           │    │         │     └ <_HookCaller 'pytest_pyfunc_call'>
           │    │         └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10e213828>>
           └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'pyfuncitem': <Function test_create_feature>}
           │    │               │     └ [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10dd17268>
           └ <_pytest.config.PytestPluginManager object at 0x10e213828>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10e8fa940>
                │    │    │    │                     └ <_HookCaller 'pytest_pyfunc_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10e8fa940>
                └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>]
          │         └ <function pytest_pyfunc_call at 0x10e8257b8>
          └ <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 184, in pytest_pyfunc_call
    result = testfunction(**testargs)
             │              └ {'client': <FlaskClient <Flask 'tp_api.app'>>}
             └ <function test_create_feature at 0x10f6be840>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tests/test_flask.py", line 74, in test_create_feature
    headers={"Authorization": token},
                              └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.IX2Kw0Pi5pI9FToh8ac7DN9X9S4nZUmiJIgLZd45QP0'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1016, in post
    return self.open(*args, **kw)
           │    │     │       └ {'data': '{"short_name": "test-feature-nQMyZb6Yj2c", "description": "This is a test description", "project": "test-project-_H...
           │    │     └ ('/feature/create',)
           │    └ <function FlaskClient.open at 0x10f6dfea0>
           └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/testing.py", line 227, in open
    follow_redirects=follow_redirects,
                     └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 970, in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
               │    │            │       │                └ False
               │    │            │       └ <method 'copy' of 'dict' objects>
               │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
               │    └ <function Client.run_wsgi_app at 0x10eec2378>
               └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 861, in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
         │            │    │            │                 └ False
         │            │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
         │            │    └ <Flask 'tp_api.app'>
         │            └ <FlaskClient <Flask 'tp_api.app'>>
         └ <function run_wsgi_app at 0x10eec29d8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1096, in run_wsgi_app
    app_rv = app(environ, start_response)
             │   │        └ <function run_wsgi_app.<locals>.start_response at 0x10f6beb70>
             │   └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
             └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function run_wsgi_app.<locals>.start_response at 0x10f6beb70>
           │    │        └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
           │    └ <function Flask.wsgi_app at 0x10efb0d08>
           └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x10efb0488>
               └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x10efb0400>
         └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://localhost/feature/create' [POST]>
           │    │              │    └ 'create_user_story'
           │    │              └ <Rule '/feature/create' (OPTIONS, POST) -> create_user_story>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'tp_api.app'>>, 'mytest': <function mytest at 0x10f62...
           └ <Flask 'tp_api.app'>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 43, in inner
    return f(*args, **kwargs)
           │  │       └ {}
           │  └ ()
           └ <function create_user_story at 0x10f6be268>

> File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 228, in create_user_story
    short_name=short_name, description=desc, project=my_proj, upsert=True,
               │                       │             └ <Project: Project object>
               │                       └ 'This is a test description'
               └ 'test-feature-nQMyZb6Yj2c'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 601, in update_one
    **update
      └ {'short_name': 'test-feature-nQMyZb6Yj2c', 'description': 'This is a test description', 'project': <Project: Project object>}
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 541, in update
    raise NotUniqueError("Update failed (%s)" % six.text_type(err))
          │                                     │   └ <class 'str'>
          │                                     └ <module 'six' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/six.py'>
          └ <class 'mongoengine.errors.NotUniqueError'>

mongoengine.errors.NotUniqueError: Update failed (E11000 duplicate key error collection: threat_playbook.use_case index: hash_1 dup key: { hash: null })
2020-04-26 13:35:49.011 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 13:35:49.241 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 13:35:49.255 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-tt_a9MbTMDY
2020-04-26 13:35:49.280 | ERROR    | tp_api.app:create_user_story:238 - Update failed (E11000 duplicate key error collection: threat_playbook.use_case index: hash_1 dup key: { hash: null })
Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 535, in update
    result = update_func(query, update, upsert=upsert)
             │           │      │              └ True
             │           │      └ {'$set': {'short_name': 'test-feature-ZRM8QSIorBw', 'description': 'This is a test description', 'project': ObjectId('5ea540d...
             │           └ {'short_name': 'test-feature-ZRM8QSIorBw'}
             └ <bound method Collection.update_one of Collection(Database(MongoClient(host=['localhost:27017'], document_class=dict, tz_awar...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 1003, in update_one
    session=session),
            └ None
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 856, in _update_retryable
    _update, session)
    │        └ None
    └ <function Collection._update_retryable.<locals>._update at 0x1025679d8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/mongo_client.py", line 1491, in _retryable_write
    return self._retry_with_session(retryable, func, s, None)
           │    │                   │          │     └ <pymongo.client_session.ClientSession object at 0x102563b00>
           │    │                   │          └ <function Collection._update_retryable.<locals>._update at 0x1025679d8>
           │    │                   └ True
           │    └ <function MongoClient._retry_with_session at 0x1021da400>
           └ MongoClient(host=['localhost:27017'], document_class=dict, tz_aware=False, connect=True, read_preference=Primary())
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/mongo_client.py", line 1384, in _retry_with_session
    return func(session, sock_info, retryable)
           │    │        │          └ False
           │    │        └ SocketInfo(<socket.socket fd=7, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=6, laddr=('127.0.0.1', 62410...
           │    └ <pymongo.client_session.ClientSession object at 0x102563b00>
           └ <function Collection._update_retryable.<locals>._update at 0x1025679d8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 852, in _update
    retryable_write=retryable_write)
                    └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/collection.py", line 823, in _update
    _check_write_command_response(result)
    │                             └ {'n': 0, 'nModified': 0, 'writeErrors': [{'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, '...
    └ <function _check_write_command_response at 0x101fe3c80>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/helpers.py", line 221, in _check_write_command_response
    _raise_last_write_error(write_errors)
    │                       └ [{'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, 'errmsg': 'E11000 duplicate key error col...
    └ <function _raise_last_write_error at 0x101fe3b70>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/helpers.py", line 202, in _raise_last_write_error
    raise DuplicateKeyError(error.get("errmsg"), 11000, error)
          │                 │     │                     └ {'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, 'errmsg': 'E11000 duplicate key error coll...
          │                 │     └ <method 'get' of 'dict' objects>
          │                 └ {'index': 0, 'code': 11000, 'keyPattern': {'hash': 1}, 'keyValue': {'hash': None}, 'errmsg': 'E11000 duplicate key error coll...
          └ <class 'pymongo.errors.DuplicateKeyError'>

pymongo.errors.DuplicateKeyError: E11000 duplicate key error collection: threat_playbook.use_case index: hash_1 dup key: { hash: null }


During handling of the above exception, another exception occurred:


Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/bin/py.test", line 8, in <module>
    sys.exit(main())
    │   │    └ <function main at 0x1015dc488>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/config/__init__.py", line 125, in main
    config=config
           └ <_pytest.config.Config object at 0x10178f358>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'config': <_pytest.config.Config object at 0x10178f358>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1010809d8>
           │    │         │     └ <_HookCaller 'pytest_cmdline_main'>
           │    │         └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1016c9cc0>>
           └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'config': <_pytest.config.Config object at 0x10178f358>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100b9e268>
           └ <_pytest.config.PytestPluginManager object at 0x1016c9cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101779c88>
                │    │    │    │                     └ <_HookCaller 'pytest_cmdline_main'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x101779c88>
                └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<_pytest.config.Config object at 0x10178f358>]
          │         └ <function pytest_cmdline_main at 0x1016a5c80>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 240, in pytest_cmdline_main
    return wrap_session(config, _main)
           │            │       └ <function _main at 0x1016a5d08>
           │            └ <_pytest.config.Config object at 0x10178f358>
           └ <function wrap_session at 0x1016a5bf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 191, in wrap_session
    session.exitstatus = doit(config, session) or 0
    │       │            │    │       └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>
    │       │            │    └ <_pytest.config.Config object at 0x10178f358>
    │       │            └ <function _main at 0x1016a5d08>
    │       └ <ExitCode.OK: 0>
    └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 247, in _main
    config.hook.pytest_runtestloop(session=session)
    │      │    │                          └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>
    │      │    └ <_HookCaller 'pytest_runtestloop'>
    │      └ <pluggy.hooks._HookRelay object at 0x100cd6da0>
    └ <_pytest.config.Config object at 0x10178f358>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1010809d8>
           │    │         │     └ <_HookCaller 'pytest_runtestloop'>
           │    │         └ <_HookCaller 'pytest_runtestloop'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1016c9cc0>>
           └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_runtestloop'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100b9e268>
           └ <_pytest.config.PytestPluginManager object at 0x1016c9cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101781f60>
                │    │    │    │                     └ <_HookCaller 'pytest_runtestloop'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x101781f60>
                └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=4>]
          │         └ <function pytest_runtestloop at 0x1016a5e18>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 272, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    │    │      │    │                            │              └ None
    │    │      │    │                            └ <Function test_create_feature>
    │    │      │    └ <_HookCaller 'pytest_runtest_protocol'>
    │    │      └ <pluggy.hooks._HookRelay object at 0x100cd6da0>
    │    └ <_pytest.config.Config object at 0x10178f358>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_create_feature>, 'nextitem': None}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1010809d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_protocol'>
           │    │         └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1016c9cc0>>
           └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_create_feature>, 'nextitem': None}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100b9e268>
           └ <_pytest.config.PytestPluginManager object at 0x1016c9cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101781e10>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_protocol'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x101781e10>
                └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>, None]
          │         └ <function pytest_runtest_protocol at 0x1016a36a8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 85, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    │               │              └ None
    │               └ <Function test_create_feature>
    └ <function runtestprotocol at 0x1016a3730>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 100, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    │       │      │               │             └ True
    │       │      │               └ <Function test_create_feature>
    │       │      └ <function call_and_report at 0x1016a3ae8>
    │       └ <method 'append' of 'list' objects>
    └ [<TestReport 'tests/test_flask.py::test_create_feature' when='setup' outcome='passed'>]
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 186, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           │                 │     │       └ {}
           │                 │     └ 'call'
           │                 └ <Function test_create_feature>
           └ <function call_runtest_hook at 0x1016a3bf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in call_runtest_hook
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       │           │             └ (<class '_pytest.outcomes.Exit'>, <class 'KeyboardInterrupt'>)
            │          │       │           └ 'call'
            │          │       └ {}
            │          └ <Function test_create_feature>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 244, in from_call
    result = func()
             └ <function call_runtest_hook.<locals>.<lambda> at 0x102567ea0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       └ {}
            │          └ <Function test_create_feature>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_create_feature>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1010809d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_call'>
           │    │         └ <_HookCaller 'pytest_runtest_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1016c9cc0>>
           └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_create_feature>}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100b9e268>
           └ <_pytest.config.PytestPluginManager object at 0x1016c9cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101781be0>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': False, 'historic': False}
                │    └ <pluggy.hooks.HookSpec object at 0x101781be0>
                └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>]
          │         └ <function pytest_runtest_call at 0x1016a38c8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 135, in pytest_runtest_call
    item.runtest()
    │    └ <function Function.runtest at 0x1016cc048>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 1479, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    │    │                                   └ <Function test_create_feature>
    │    └ <property object at 0x1016740e8>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'pyfuncitem': <Function test_create_feature>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1010809d8>
           │    │         │     └ <_HookCaller 'pytest_pyfunc_call'>
           │    │         └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1016c9cc0>>
           └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'pyfuncitem': <Function test_create_feature>}
           │    │               │     └ [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100b9e268>
           └ <_pytest.config.PytestPluginManager object at 0x1016c9cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101781940>
                │    │    │    │                     └ <_HookCaller 'pytest_pyfunc_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x101781940>
                └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>]
          │         └ <function pytest_pyfunc_call at 0x1016a87b8>
          └ <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 184, in pytest_pyfunc_call
    result = testfunction(**testargs)
             │              └ {'client': <FlaskClient <Flask 'tp_api.app'>>}
             └ <function test_create_feature at 0x102544730>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tests/test_flask.py", line 74, in test_create_feature
    headers={"Authorization": token},
                              └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.IX2Kw0Pi5pI9FToh8ac7DN9X9S4nZUmiJIgLZd45QP0'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1016, in post
    return self.open(*args, **kw)
           │    │     │       └ {'data': '{"short_name": "test-feature-ZRM8QSIorBw", "description": "This is a test description", "project": "test-project-tt...
           │    │     └ ('/feature/create',)
           │    └ <function FlaskClient.open at 0x102567bf8>
           └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/testing.py", line 227, in open
    follow_redirects=follow_redirects,
                     └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 970, in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
               │    │            │       │                └ False
               │    │            │       └ <method 'copy' of 'dict' objects>
               │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
               │    └ <function Client.run_wsgi_app at 0x101d48378>
               └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 861, in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
         │            │    │            │                 └ False
         │            │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
         │            │    └ <Flask 'tp_api.app'>
         │            └ <FlaskClient <Flask 'tp_api.app'>>
         └ <function run_wsgi_app at 0x101d489d8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1096, in run_wsgi_app
    app_rv = app(environ, start_response)
             │   │        └ <function run_wsgi_app.<locals>.start_response at 0x102544c80>
             │   └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
             └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function run_wsgi_app.<locals>.start_response at 0x102544c80>
           │    │        └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
           │    └ <function Flask.wsgi_app at 0x101e37d08>
           └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x101e37488>
               └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x101e37400>
         └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://localhost/feature/create' [POST]>
           │    │              │    └ 'create_user_story'
           │    │              └ <Rule '/feature/create' (OPTIONS, POST) -> create_user_story>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'tp_api.app'>>, 'mytest': <function mytest at 0x1024b...
           └ <Flask 'tp_api.app'>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 43, in inner
    return f(*args, **kwargs)
           │  │       └ {}
           │  └ ()
           └ <function create_user_story at 0x102544158>

> File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 228, in create_user_story
    short_name=short_name, description=desc, project=my_proj, upsert=True,
               │                       │             └ <Project: Project object>
               │                       └ 'This is a test description'
               └ 'test-feature-ZRM8QSIorBw'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 601, in update_one
    **update
      └ {'short_name': 'test-feature-ZRM8QSIorBw', 'description': 'This is a test description', 'project': <Project: Project object>}
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 541, in update
    raise NotUniqueError("Update failed (%s)" % six.text_type(err))
          │                                     │   └ <class 'str'>
          │                                     └ <module 'six' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/six.py'>
          └ <class 'mongoengine.errors.NotUniqueError'>

mongoengine.errors.NotUniqueError: Update failed (E11000 duplicate key error collection: threat_playbook.use_case index: hash_1 dup key: { hash: null })
2020-04-26 13:36:10.319 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 13:36:10.546 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 13:36:10.557 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-R653bRUbP88
2020-04-26 13:36:10.591 | INFO     | tp_api.app:create_user_story:230 - Successfully created user-story/feature 'test-feature-Bk24HCRkbMQ'
2020-04-26 15:01:43.524 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 15:01:43.755 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 15:01:43.769 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-xxtOHbMHx64
2020-04-26 15:01:43.779 | INFO     | tp_api.app:create_user_story:231 - Successfully created user-story/feature 'test-feature-mH-4of80RqA'
2020-04-26 15:01:43.814 | INFO     | tp_api.app:create_abuser_story:278 - Successfully created abuser-story 'test-abuser-story-J-Jdrw-mfNM'
2020-04-26 15:04:27.956 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 15:04:28.174 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 15:04:28.188 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-LEYiDpwwZ5k
2020-04-26 15:04:28.197 | INFO     | tp_api.app:create_user_story:231 - Successfully created user-story/feature 'test-feature-tEiVx9GMP_s'
2020-04-26 15:04:28.213 | INFO     | tp_api.app:create_abuser_story:282 - Successfully created abuser-story 'test-abuser-story-dO0aYLwCLnA'
2020-04-26 16:24:48.191 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 16:24:48.410 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 16:24:48.421 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-9dTLc6t5Uqg
2020-04-26 16:24:48.432 | INFO     | tp_api.app:create_user_story:231 - Successfully created user-story/feature 'test-feature-1O9FLOOv_9U'
2020-04-26 16:24:48.447 | INFO     | tp_api.app:create_abuser_story:282 - Successfully created abuser-story 'test-abuser-story-NV3_xHFal40'
2020-04-26 16:25:25.924 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 16:25:26.144 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 16:25:26.158 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-RUXHSY1iV3Y
2020-04-26 16:25:26.167 | INFO     | tp_api.app:create_user_story:231 - Successfully created user-story/feature 'test-feature-94I-9-kOooM'
2020-04-26 16:25:26.183 | INFO     | tp_api.app:create_abuser_story:282 - Successfully created abuser-story 'test-abuser-story-b_zdNu3SgXk'
2020-04-26 16:25:26.197 | INFO     | tp_api.app:create_threat_scenario:357 - Created Threat Scenario 'threat-scenario-ex7k00NQ5Og'
2020-04-26 16:33:44.434 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 16:33:44.653 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 16:33:44.666 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-pQcLXvwt8rs
2020-04-26 16:33:44.675 | INFO     | tp_api.app:create_user_story:231 - Successfully created user-story/feature 'test-feature-08Ba9Rlop1s'
2020-04-26 16:33:44.688 | INFO     | tp_api.app:create_abuser_story:282 - Successfully created abuser-story 'test-abuser-story-Jq7ZRbLgBjI'
2020-04-26 16:33:44.705 | INFO     | tp_api.app:create_threat_scenario:362 - Created Threat Scenario 'threat-scenario-LsVFqzLuswM'
2020-04-26 17:02:12.208 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 17:02:12.442 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 17:02:12.454 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-Z92EzweMOhE
2020-04-26 17:02:12.462 | INFO     | tp_api.app:create_user_story:231 - Successfully created user-story/feature 'test-feature-i2MzWJmECwE'
2020-04-26 17:02:12.477 | INFO     | tp_api.app:create_abuser_story:282 - Successfully created abuser-story 'test-abuser-story-4zX4hcQHKvs'
2020-04-26 17:02:12.502 | INFO     | tp_api.app:create_threat_scenario:362 - Created Threat Scenario 'threat-scenario-FWAi2ZDNW2w'
2020-04-26 17:04:21.615 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 17:04:21.829 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 17:04:21.842 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-7Rcl417W18Y
2020-04-26 17:04:21.849 | INFO     | tp_api.app:create_user_story:231 - Successfully created user-story/feature 'test-feature-v3laXT31v6k'
2020-04-26 17:04:21.863 | INFO     | tp_api.app:create_abuser_story:282 - Successfully created abuser-story 'test-abuser-story-t6SfH4bdRrY'
2020-04-26 17:04:21.879 | INFO     | tp_api.app:create_threat_scenario:362 - Created Threat Scenario 'threat-scenario-J7OokmWZFPg'
2020-04-26 17:05:11.629 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 17:05:11.861 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 17:05:11.878 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-Jx2t9su9MKo
2020-04-26 17:05:11.890 | INFO     | tp_api.app:create_user_story:231 - Successfully created user-story/feature 'test-feature-plnvm46hZM8'
2020-04-26 17:05:11.908 | INFO     | tp_api.app:create_abuser_story:282 - Successfully created abuser-story 'test-abuser-story-RHLCK03EyrI'
2020-04-26 17:05:11.923 | INFO     | tp_api.app:create_threat_scenario:362 - Created Threat Scenario 'threat-scenario-zyTca1QaM30'
2020-04-26 17:06:06.212 | INFO     | tp_api.app:change_password:103 - Changed password for user admin@admin.com
2020-04-26 17:06:06.435 | INFO     | tp_api.app:login:158 - User 'admin@admin.com' successfully logged in
2020-04-26 17:06:06.447 | INFO     | tp_api.app:create_project:191 - Successfully created project test-project-dN235b-q9Gc
2020-04-26 17:06:06.457 | INFO     | tp_api.app:create_user_story:231 - Successfully created user-story/feature 'test-feature-4-sYZ-_Oyj4'
2020-04-26 17:06:06.470 | INFO     | tp_api.app:create_abuser_story:282 - Successfully created abuser-story 'test-abuser-story-_4I5eZHURXw'
2020-04-26 17:06:06.486 | INFO     | tp_api.app:create_threat_scenario:362 - Created Threat Scenario 'threat-scenario-OXbsX8noWfo'
2020-04-26 17:06:06.509 | INFO     | tp_api.app:create_test_case:434 - Created Test-Case 'test-case-DxrmBmq_49Q' for Threat Scenario 'threat-scenario-OXbsX8noWfo'
2020-04-27 06:19:31.414 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:19:31.632 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:19:31.647 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-VvaRPWwd5iM
2020-04-27 06:19:31.661 | ERROR    | tp_api.app:create_user_story:246 - name 'myproj' is not defined
Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/bin/py.test", line 8, in <module>
    sys.exit(main())
    │   │    └ <function main at 0x10d98b488>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/config/__init__.py", line 125, in main
    config=config
           └ <_pytest.config.Config object at 0x10db3c470>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'config': <_pytest.config.Config object at 0x10db3c470>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10d42f9d8>
           │    │         │     └ <_HookCaller 'pytest_cmdline_main'>
           │    │         └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10cfeccc0>>
           └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'config': <_pytest.config.Config object at 0x10db3c470>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10cf4c268>
           └ <_pytest.config.PytestPluginManager object at 0x10cfeccc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10db27d68>
                │    │    │    │                     └ <_HookCaller 'pytest_cmdline_main'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10db27d68>
                └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<_pytest.config.Config object at 0x10db3c470>]
          │         └ <function pytest_cmdline_main at 0x10da54c80>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 240, in pytest_cmdline_main
    return wrap_session(config, _main)
           │            │       └ <function _main at 0x10da54d08>
           │            └ <_pytest.config.Config object at 0x10db3c470>
           └ <function wrap_session at 0x10da54bf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 191, in wrap_session
    session.exitstatus = doit(config, session) or 0
    │       │            │    │       └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=8>
    │       │            │    └ <_pytest.config.Config object at 0x10db3c470>
    │       │            └ <function _main at 0x10da54d08>
    │       └ <ExitCode.OK: 0>
    └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 247, in _main
    config.hook.pytest_runtestloop(session=session)
    │      │    │                          └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=8>
    │      │    └ <_HookCaller 'pytest_runtestloop'>
    │      └ <pluggy.hooks._HookRelay object at 0x10d084da0>
    └ <_pytest.config.Config object at 0x10db3c470>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=8>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10d42f9d8>
           │    │         │     └ <_HookCaller 'pytest_runtestloop'>
           │    │         └ <_HookCaller 'pytest_runtestloop'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10cfeccc0>>
           └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=8>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_runtestloop'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10cf4c268>
           └ <_pytest.config.PytestPluginManager object at 0x10cfeccc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10db3c0b8>
                │    │    │    │                     └ <_HookCaller 'pytest_runtestloop'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10db3c0b8>
                └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=8>]
          │         └ <function pytest_runtestloop at 0x10da54e18>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 272, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    │    │      │    │                            │              └ <Function test_create_abuser_story>
    │    │      │    │                            └ <Function test_create_feature>
    │    │      │    └ <_HookCaller 'pytest_runtest_protocol'>
    │    │      └ <pluggy.hooks._HookRelay object at 0x10d084da0>
    │    └ <_pytest.config.Config object at 0x10db3c470>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_create_feature>, 'nextitem': <Function test_create_abuser_story>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10d42f9d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_protocol'>
           │    │         └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10cfeccc0>>
           └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_create_feature>, 'nextitem': <Function test_create_abuser_story>}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10cf4c268>
           └ <_pytest.config.PytestPluginManager object at 0x10cfeccc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10db2ff28>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_protocol'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10db2ff28>
                └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>, <Function test_create_abuser_story>]
          │         └ <function pytest_runtest_protocol at 0x10da526a8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 85, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    │               │              └ <Function test_create_abuser_story>
    │               └ <Function test_create_feature>
    └ <function runtestprotocol at 0x10da52730>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 100, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    │       │      │               │             └ True
    │       │      │               └ <Function test_create_feature>
    │       │      └ <function call_and_report at 0x10da52ae8>
    │       └ <method 'append' of 'list' objects>
    └ [<TestReport 'tests/test_flask.py::test_create_feature' when='setup' outcome='passed'>]
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 186, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           │                 │     │       └ {}
           │                 │     └ 'call'
           │                 └ <Function test_create_feature>
           └ <function call_runtest_hook at 0x10da52bf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in call_runtest_hook
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       │           │             └ (<class '_pytest.outcomes.Exit'>, <class 'KeyboardInterrupt'>)
            │          │       │           └ 'call'
            │          │       └ {}
            │          └ <Function test_create_feature>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 244, in from_call
    result = func()
             └ <function call_runtest_hook.<locals>.<lambda> at 0x10e2acb70>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       └ {}
            │          └ <Function test_create_feature>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_create_feature>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10d42f9d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_call'>
           │    │         └ <_HookCaller 'pytest_runtest_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10cfeccc0>>
           └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_create_feature>}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10cf4c268>
           └ <_pytest.config.PytestPluginManager object at 0x10cfeccc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10db2fcf8>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': False, 'historic': False}
                │    └ <pluggy.hooks.HookSpec object at 0x10db2fcf8>
                └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>]
          │         └ <function pytest_runtest_call at 0x10da528c8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 135, in pytest_runtest_call
    item.runtest()
    │    └ <function Function.runtest at 0x10da7a048>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 1479, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    │    │                                   └ <Function test_create_feature>
    │    └ <property object at 0x10da2e188>
    └ <Function test_create_feature>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'pyfuncitem': <Function test_create_feature>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10d42f9d8>
           │    │         │     └ <_HookCaller 'pytest_pyfunc_call'>
           │    │         └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10cfeccc0>>
           └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'pyfuncitem': <Function test_create_feature>}
           │    │               │     └ [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10cf4c268>
           └ <_pytest.config.PytestPluginManager object at 0x10cfeccc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10db2fa58>
                │    │    │    │                     └ <_HookCaller 'pytest_pyfunc_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10db2fa58>
                └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_create_feature>]
          │         └ <function pytest_pyfunc_call at 0x10da5a7b8>
          └ <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 184, in pytest_pyfunc_call
    result = testfunction(**testargs)
             │              └ {'client': <FlaskClient <Flask 'tp_api.app'>>}
             └ <function test_create_feature at 0x10e8fcbf8>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tests/test_flask.py", line 79, in test_create_feature
    headers={"Authorization": token},
                              └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.IX2Kw0Pi5pI9FToh8ac7DN9X9S4nZUmiJIgLZd45QP0'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1016, in post
    return self.open(*args, **kw)
           │    │     │       └ {'data': '{"short_name": "test-feature-h0Z7xdojXk8", "description": "This is a test description", "project": "test-project-Vv...
           │    │     └ ('/feature/create',)
           │    └ <function FlaskClient.open at 0x10e926598>
           └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/testing.py", line 227, in open
    follow_redirects=follow_redirects,
                     └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 970, in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
               │    │            │       │                └ False
               │    │            │       └ <method 'copy' of 'dict' objects>
               │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
               │    └ <function Client.run_wsgi_app at 0x10e0f8378>
               └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 861, in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
         │            │    │            │                 └ False
         │            │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
         │            │    └ <Flask 'tp_api.app'>
         │            └ <FlaskClient <Flask 'tp_api.app'>>
         └ <function run_wsgi_app at 0x10e0f89d8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1096, in run_wsgi_app
    app_rv = app(environ, start_response)
             │   │        └ <function run_wsgi_app.<locals>.start_response at 0x10e9141e0>
             │   └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
             └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function run_wsgi_app.<locals>.start_response at 0x10e9141e0>
           │    │        └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
           │    └ <function Flask.wsgi_app at 0x10e1e6d08>
           └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x10e1e6488>
               └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x10e1e6400>
         └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://localhost/feature/create' [POST]>
           │    │              │    └ 'create_user_story'
           │    │              └ <Rule '/feature/create' (POST, OPTIONS) -> create_user_story>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'tp_api.app'>>, 'mytest': <function mytest at 0x10e87...
           └ <Flask 'tp_api.app'>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 45, in inner
    return f(*args, **kwargs)
           │  │       └ {}
           │  └ ()
           └ <function create_user_story at 0x10e876d08>

> File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 234, in create_user_story
    myproj.features.append(ref_feature)
                           └ <UseCase: UseCase object>

NameError: name 'myproj' is not defined
2020-04-27 06:20:34.863 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:20:35.086 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:20:35.101 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-WgD66cTMYbg
2020-04-27 06:20:35.116 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-Eo9HPVWQ--E'
2020-04-27 06:20:35.133 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-iB5FIBfiUfk'
2020-04-27 06:20:35.149 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-AK2bnJrBHbs'
2020-04-27 06:20:35.162 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-p6Nx5kLjeQU' for Threat Scenario 'threat-scenario-AK2bnJrBHbs'
2020-04-27 06:21:46.918 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:21:47.167 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:21:47.184 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-wnwAoiBN0kM
2020-04-27 06:21:47.203 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-38Xa4BUwxKA'
2020-04-27 06:21:47.221 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-7Nr-fjI_3qk'
2020-04-27 06:21:47.240 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-EjWAHvcqT9k'
2020-04-27 06:21:47.257 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-g2OVv4QmuKE' for Threat Scenario 'threat-scenario-EjWAHvcqT9k'
2020-04-27 06:23:17.170 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:23:17.405 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:23:17.420 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-myAJVhBOWZA
2020-04-27 06:23:17.436 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-NGK8vJb07y4'
2020-04-27 06:23:17.455 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-ZTqvuKOakoU'
2020-04-27 06:23:17.474 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-ki9E64rhRig'
2020-04-27 06:23:17.489 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-Al0RBiL-UY8' for Threat Scenario 'threat-scenario-ki9E64rhRig'
2020-04-27 06:23:46.893 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:23:47.118 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:23:47.129 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-1zeAfrNfEtA
2020-04-27 06:23:47.145 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-2l2aCyiGvxQ'
2020-04-27 06:23:47.162 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-11goEjSfPC4'
2020-04-27 06:23:47.180 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-sOH2cU1qM_M'
2020-04-27 06:23:47.194 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-Dk-WqZDlLYs' for Threat Scenario 'threat-scenario-sOH2cU1qM_M'
2020-04-27 06:26:00.624 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:26:00.843 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:26:00.853 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-WRmChZSeNdQ
2020-04-27 06:26:00.867 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-1vHe29w89Bo'
2020-04-27 06:26:00.884 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-Uv0su91u7S8'
2020-04-27 06:26:00.901 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-2XQoWZHBVLQ'
2020-04-27 06:26:00.915 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-OcNg9xP9Fqw' for Threat Scenario 'threat-scenario-2XQoWZHBVLQ'
2020-04-27 06:26:30.145 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:26:30.368 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:26:30.380 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-3yVvc2r6vBs
2020-04-27 06:26:30.397 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-BtOzwRpf-fg'
2020-04-27 06:26:30.414 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-j8Lghsr-e9Q'
2020-04-27 06:26:30.433 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-YieIUKUcPas'
2020-04-27 06:26:30.448 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-qgyCEs1sj9I' for Threat Scenario 'threat-scenario-YieIUKUcPas'
2020-04-27 06:27:52.567 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:27:52.814 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:27:52.825 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-jWlzOdC6Grw
2020-04-27 06:27:52.838 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-xn0YeVYh_u4'
2020-04-27 06:27:52.854 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-dDG7Dk50KAc'
2020-04-27 06:27:52.870 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-UldADaB9DM4'
2020-04-27 06:27:52.883 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-pWOlmjKjGsU' for Threat Scenario 'threat-scenario-UldADaB9DM4'
2020-04-27 06:28:31.600 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:28:31.816 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:28:31.830 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-gfJ4leOjDV4
2020-04-27 06:28:31.846 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-sTPiP-Ljsjg'
2020-04-27 06:28:31.864 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-4KuHauqw4vg'
2020-04-27 06:28:31.881 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-qsg7QDLQoqw'
2020-04-27 06:28:31.895 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-xwoC7iZseos' for Threat Scenario 'threat-scenario-qsg7QDLQoqw'
2020-04-27 06:28:42.415 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:28:42.633 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:28:42.645 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-MO8CE5d0QEM
2020-04-27 06:28:42.659 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-WAu66b86YVc'
2020-04-27 06:28:42.676 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-cl1wS2-3Znw'
2020-04-27 06:28:42.693 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-MZI0COzFm0o'
2020-04-27 06:28:42.708 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-VMfxjGhDYgI' for Threat Scenario 'threat-scenario-MZI0COzFm0o'
2020-04-27 06:29:13.272 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:29:13.500 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:29:13.513 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-U7avuH0hNoM
2020-04-27 06:29:13.531 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature--E-e9scPlls'
2020-04-27 06:29:13.546 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-M6KXriDuxFQ'
2020-04-27 06:29:13.563 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-qh8y5bFv074'
2020-04-27 06:29:13.577 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-fsDDLy1q0Q8' for Threat Scenario 'threat-scenario-qh8y5bFv074'
2020-04-27 06:30:21.945 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:30:22.164 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:30:22.177 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-4U0XIUNGVoE
2020-04-27 06:30:22.192 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-LrI6Wbqr9NI'
2020-04-27 06:30:22.208 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-UincZmtPkWk'
2020-04-27 06:30:22.223 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-htwsQ7cX7-Q'
2020-04-27 06:30:22.237 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-3GeqkmswZrs' for Threat Scenario 'threat-scenario-htwsQ7cX7-Q'
2020-04-27 06:37:58.230 | INFO     | tp_api.app:change_password:105 - Changed password for user admin@admin.com
2020-04-27 06:37:58.453 | INFO     | tp_api.app:login:160 - User 'admin@admin.com' successfully logged in
2020-04-27 06:37:58.467 | INFO     | tp_api.app:create_project:193 - Successfully created project test-project-QeFURPX0O9Q
2020-04-27 06:37:58.484 | INFO     | tp_api.app:create_user_story:237 - Successfully created user-story/feature 'test-feature-rNW9rNDhj5I'
2020-04-27 06:37:58.499 | INFO     | tp_api.app:create_abuser_story:288 - Successfully created abuser-story 'test-abuser-story-7iRUQJDlhA4'
2020-04-27 06:37:58.517 | INFO     | tp_api.app:create_threat_scenario:368 - Created Threat Scenario 'threat-scenario-sId_S_1PW9M'
2020-04-27 06:37:58.532 | INFO     | tp_api.app:create_test_case:440 - Created Test-Case 'test-case-FkwMdBld6lg' for Threat Scenario 'threat-scenario-sId_S_1PW9M'
2020-04-27 06:39:02.370 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-04-27 06:39:02.617 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-04-27 06:39:02.632 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-QvEkh0tPmmk
2020-04-27 06:39:02.648 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-gi4_wmk22vQ'
2020-04-27 06:39:02.665 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-uRWskOzLxsM'
2020-04-27 06:39:02.682 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-TZqzTpbxXwI'
2020-04-27 06:39:02.696 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-oSvm2vwrOiY' for Threat Scenario 'threat-scenario-TZqzTpbxXwI'
2020-04-27 06:40:41.153 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-04-27 06:40:41.378 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-04-27 06:40:41.393 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-FdvR1h-ICRY
2020-04-27 06:40:41.408 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-NSNOXvbdTL0'
2020-04-27 06:40:41.424 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-sfIOuuBw67o'
2020-04-27 06:40:41.442 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-REKL6YW-UNE'
2020-04-27 06:40:41.456 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-_gj5OKr3YX0' for Threat Scenario 'threat-scenario-REKL6YW-UNE'
2020-04-27 06:40:41.471 | ERROR    | tp_api.app:inner:45 - name 'DoestNotExist' is not defined
Traceback (most recent call last):

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 490, in get_project
    ref_project = json.loads(Project.objects.get(name=name).to_json())
                  │    │     │       └ <mongoengine.queryset.manager.QuerySetManager object at 0x111580cf8>
                  │    │     └ <class 'tp_api.models.Project'>
                  │    └ <function loads at 0x1109e7488>
                  └ <module 'json' from '/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/json/__init__.py'>

NameError: name 'name' is not defined


During handling of the above exception, another exception occurred:


Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/bin/py.test", line 8, in <module>
    sys.exit(main())
    │   │    └ <function main at 0x110735488>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/config/__init__.py", line 125, in main
    config=config
           └ <_pytest.config.Config object at 0x1108e6470>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'config': <_pytest.config.Config object at 0x1108e6470>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1101d99d8>
           │    │         │     └ <_HookCaller 'pytest_cmdline_main'>
           │    │         └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10fd96cc0>>
           └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'config': <_pytest.config.Config object at 0x1108e6470>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10fcf6268>
           └ <_pytest.config.PytestPluginManager object at 0x10fd96cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x1108d1d68>
                │    │    │    │                     └ <_HookCaller 'pytest_cmdline_main'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x1108d1d68>
                └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<_pytest.config.Config object at 0x1108e6470>]
          │         └ <function pytest_cmdline_main at 0x1107fec80>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 240, in pytest_cmdline_main
    return wrap_session(config, _main)
           │            │       └ <function _main at 0x1107fed08>
           │            └ <_pytest.config.Config object at 0x1108e6470>
           └ <function wrap_session at 0x1107febf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 191, in wrap_session
    session.exitstatus = doit(config, session) or 0
    │       │            │    │       └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>
    │       │            │    └ <_pytest.config.Config object at 0x1108e6470>
    │       │            └ <function _main at 0x1107fed08>
    │       └ <ExitCode.OK: 0>
    └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 247, in _main
    config.hook.pytest_runtestloop(session=session)
    │      │    │                          └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>
    │      │    └ <_HookCaller 'pytest_runtestloop'>
    │      └ <pluggy.hooks._HookRelay object at 0x10fe2dd68>
    └ <_pytest.config.Config object at 0x1108e6470>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1101d99d8>
           │    │         │     └ <_HookCaller 'pytest_runtestloop'>
           │    │         └ <_HookCaller 'pytest_runtestloop'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10fd96cc0>>
           └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_runtestloop'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10fcf6268>
           └ <_pytest.config.PytestPluginManager object at 0x10fd96cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x1108e60b8>
                │    │    │    │                     └ <_HookCaller 'pytest_runtestloop'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x1108e60b8>
                └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>]
          │         └ <function pytest_runtestloop at 0x1107fee18>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 272, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    │    │      │    │                            │              └ None
    │    │      │    │                            └ <Function test_get_project_specific>
    │    │      │    └ <_HookCaller 'pytest_runtest_protocol'>
    │    │      └ <pluggy.hooks._HookRelay object at 0x10fe2dd68>
    │    └ <_pytest.config.Config object at 0x1108e6470>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_get_project_specific>, 'nextitem': None}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1101d99d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_protocol'>
           │    │         └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10fd96cc0>>
           └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_get_project_specific>, 'nextitem': None}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10fcf6268>
           └ <_pytest.config.PytestPluginManager object at 0x10fd96cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x1108d9f28>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_protocol'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x1108d9f28>
                └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>, None]
          │         └ <function pytest_runtest_protocol at 0x1107fc6a8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 85, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    │               │              └ None
    │               └ <Function test_get_project_specific>
    └ <function runtestprotocol at 0x1107fc730>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 100, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    │       │      │               │             └ True
    │       │      │               └ <Function test_get_project_specific>
    │       │      └ <function call_and_report at 0x1107fcae8>
    │       └ <method 'append' of 'list' objects>
    └ [<TestReport 'tests/test_flask.py::test_get_project_specific' when='setup' outcome='passed'>]
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 186, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           │                 │     │       └ {}
           │                 │     └ 'call'
           │                 └ <Function test_get_project_specific>
           └ <function call_runtest_hook at 0x1107fcbf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in call_runtest_hook
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       │           │             └ (<class '_pytest.outcomes.Exit'>, <class 'KeyboardInterrupt'>)
            │          │       │           └ 'call'
            │          │       └ {}
            │          └ <Function test_get_project_specific>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 244, in from_call
    result = func()
             └ <function call_runtest_hook.<locals>.<lambda> at 0x11172d840>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       └ {}
            │          └ <Function test_get_project_specific>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_get_project_specific>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1101d99d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_call'>
           │    │         └ <_HookCaller 'pytest_runtest_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10fd96cc0>>
           └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_get_project_specific>}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10fcf6268>
           └ <_pytest.config.PytestPluginManager object at 0x10fd96cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x1108d9cf8>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': False, 'historic': False}
                │    └ <pluggy.hooks.HookSpec object at 0x1108d9cf8>
                └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>]
          │         └ <function pytest_runtest_call at 0x1107fc8c8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 135, in pytest_runtest_call
    item.runtest()
    │    └ <function Function.runtest at 0x110824048>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 1479, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    │    │                                   └ <Function test_get_project_specific>
    │    └ <property object at 0x1107d8188>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'pyfuncitem': <Function test_get_project_specific>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x1101d99d8>
           │    │         │     └ <_HookCaller 'pytest_pyfunc_call'>
           │    │         └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x10fd96cc0>>
           └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'pyfuncitem': <Function test_get_project_specific>}
           │    │               │     └ [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x10fcf6268>
           └ <_pytest.config.PytestPluginManager object at 0x10fd96cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x1108d9a58>
                │    │    │    │                     └ <_HookCaller 'pytest_pyfunc_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x1108d9a58>
                └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>]
          │         └ <function pytest_pyfunc_call at 0x1108047b8>
          └ <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 184, in pytest_pyfunc_call
    result = testfunction(**testargs)
             │              └ {'client': <FlaskClient <Flask 'tp_api.app'>>}
             └ <function test_get_project_specific at 0x1116b0158>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tests/test_flask.py", line 166, in test_get_project_specific
    headers={"Authorization": token},
                              └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.IX2Kw0Pi5pI9FToh8ac7DN9X9S4nZUmiJIgLZd45QP0'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1016, in post
    return self.open(*args, **kw)
           │    │     │       └ {'data': '{"name": "test-project-uKbkImowqkn4_RT_1lt_J-06fULuz21KUg835AJQSV4"}', 'content_type': 'application/json', 'headers...
           │    │     └ ('/project/read',)
           │    └ <function FlaskClient.open at 0x1116d5730>
           └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/testing.py", line 227, in open
    follow_redirects=follow_redirects,
                     └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 970, in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
               │    │            │       │                └ False
               │    │            │       └ <method 'copy' of 'dict' objects>
               │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
               │    └ <function Client.run_wsgi_app at 0x110ea2378>
               └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 861, in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
         │            │    │            │                 └ False
         │            │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
         │            │    └ <Flask 'tp_api.app'>
         │            └ <FlaskClient <Flask 'tp_api.app'>>
         └ <function run_wsgi_app at 0x110ea29d8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1096, in run_wsgi_app
    app_rv = app(environ, start_response)
             │   │        └ <function run_wsgi_app.<locals>.start_response at 0x11172d730>
             │   └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
             └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function run_wsgi_app.<locals>.start_response at 0x11172d730>
           │    │        └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
           │    └ <function Flask.wsgi_app at 0x110f8fd08>
           └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x110f8f488>
               └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x110f8f400>
         └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://localhost/project/read' [POST]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (HEAD, POST, GET, OPTIONS) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'tp_api.app'>>, 'mytest': <function mytest at 0x11161...
           └ <Flask 'tp_api.app'>

> File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 43, in inner
    return f(*args, **kwargs)
           │  │       └ {}
           │  └ ()
           └ <function get_project at 0x1116a67b8>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 492, in get_project
    except DoestNotExist:

NameError: name 'DoestNotExist' is not defined
2020-04-27 06:41:32.351 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-04-27 06:41:32.575 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-04-27 06:41:32.588 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-jJsC1GgqQIg
2020-04-27 06:41:32.602 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-DgLY2uJ3ChU'
2020-04-27 06:41:32.619 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-GXduvyX5VdA'
2020-04-27 06:41:32.636 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-C6YU0DHUm84'
2020-04-27 06:41:32.650 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-yeJYejTAOB8' for Threat Scenario 'threat-scenario-C6YU0DHUm84'
2020-04-27 06:41:32.664 | ERROR    | tp_api.app:inner:45 - name 'DoestNotExist' is not defined
Traceback (most recent call last):

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 490, in get_project
    ref_project = json.loads(Project.objects.get(name=name).to_json())
                  │    │     │       └ <mongoengine.queryset.manager.QuerySetManager object at 0x1021d9c88>
                  │    │     └ <class 'tp_api.models.Project'>
                  │    └ <function loads at 0x101641488>
                  └ <module 'json' from '/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/json/__init__.py'>

NameError: name 'name' is not defined


During handling of the above exception, another exception occurred:


Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/bin/py.test", line 8, in <module>
    sys.exit(main())
    │   │    └ <function main at 0x10138f488>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/config/__init__.py", line 125, in main
    config=config
           └ <_pytest.config.Config object at 0x1015403c8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'config': <_pytest.config.Config object at 0x1015403c8>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x100e339d8>
           │    │         │     └ <_HookCaller 'pytest_cmdline_main'>
           │    │         └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1009f0cc0>>
           └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'config': <_pytest.config.Config object at 0x1015403c8>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100950268>
           └ <_pytest.config.PytestPluginManager object at 0x1009f0cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10152ccc0>
                │    │    │    │                     └ <_HookCaller 'pytest_cmdline_main'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10152ccc0>
                └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<_pytest.config.Config object at 0x1015403c8>]
          │         └ <function pytest_cmdline_main at 0x101458c80>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 240, in pytest_cmdline_main
    return wrap_session(config, _main)
           │            │       └ <function _main at 0x101458d08>
           │            └ <_pytest.config.Config object at 0x1015403c8>
           └ <function wrap_session at 0x101458bf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 191, in wrap_session
    session.exitstatus = doit(config, session) or 0
    │       │            │    │       └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>
    │       │            │    └ <_pytest.config.Config object at 0x1015403c8>
    │       │            └ <function _main at 0x101458d08>
    │       └ <ExitCode.OK: 0>
    └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 247, in _main
    config.hook.pytest_runtestloop(session=session)
    │      │    │                          └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>
    │      │    └ <_HookCaller 'pytest_runtestloop'>
    │      └ <pluggy.hooks._HookRelay object at 0x100a88da0>
    └ <_pytest.config.Config object at 0x1015403c8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x100e339d8>
           │    │         │     └ <_HookCaller 'pytest_runtestloop'>
           │    │         └ <_HookCaller 'pytest_runtestloop'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1009f0cc0>>
           └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_runtestloop'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100950268>
           └ <_pytest.config.PytestPluginManager object at 0x1009f0cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101533fd0>
                │    │    │    │                     └ <_HookCaller 'pytest_runtestloop'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x101533fd0>
                └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>]
          │         └ <function pytest_runtestloop at 0x101458e18>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 272, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    │    │      │    │                            │              └ None
    │    │      │    │                            └ <Function test_get_project_specific>
    │    │      │    └ <_HookCaller 'pytest_runtest_protocol'>
    │    │      └ <pluggy.hooks._HookRelay object at 0x100a88da0>
    │    └ <_pytest.config.Config object at 0x1015403c8>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_get_project_specific>, 'nextitem': None}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x100e339d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_protocol'>
           │    │         └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1009f0cc0>>
           └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_get_project_specific>, 'nextitem': None}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100950268>
           └ <_pytest.config.PytestPluginManager object at 0x1009f0cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101533e80>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_protocol'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x101533e80>
                └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>, None]
          │         └ <function pytest_runtest_protocol at 0x1014566a8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 85, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    │               │              └ None
    │               └ <Function test_get_project_specific>
    └ <function runtestprotocol at 0x101456730>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 100, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    │       │      │               │             └ True
    │       │      │               └ <Function test_get_project_specific>
    │       │      └ <function call_and_report at 0x101456ae8>
    │       └ <method 'append' of 'list' objects>
    └ [<TestReport 'tests/test_flask.py::test_get_project_specific' when='setup' outcome='passed'>]
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 186, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           │                 │     │       └ {}
           │                 │     └ 'call'
           │                 └ <Function test_get_project_specific>
           └ <function call_runtest_hook at 0x101456bf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in call_runtest_hook
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       │           │             └ (<class '_pytest.outcomes.Exit'>, <class 'KeyboardInterrupt'>)
            │          │       │           └ 'call'
            │          │       └ {}
            │          └ <Function test_get_project_specific>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 244, in from_call
    result = func()
             └ <function call_runtest_hook.<locals>.<lambda> at 0x102388840>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       └ {}
            │          └ <Function test_get_project_specific>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_get_project_specific>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x100e339d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_call'>
           │    │         └ <_HookCaller 'pytest_runtest_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1009f0cc0>>
           └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_get_project_specific>}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100950268>
           └ <_pytest.config.PytestPluginManager object at 0x1009f0cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101533c50>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': False, 'historic': False}
                │    └ <pluggy.hooks.HookSpec object at 0x101533c50>
                └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>]
          │         └ <function pytest_runtest_call at 0x1014568c8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 135, in pytest_runtest_call
    item.runtest()
    │    └ <function Function.runtest at 0x10147e048>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 1479, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    │    │                                   └ <Function test_get_project_specific>
    │    └ <property object at 0x101432188>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'pyfuncitem': <Function test_get_project_specific>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x100e339d8>
           │    │         │     └ <_HookCaller 'pytest_pyfunc_call'>
           │    │         └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1009f0cc0>>
           └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'pyfuncitem': <Function test_get_project_specific>}
           │    │               │     └ [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100950268>
           └ <_pytest.config.PytestPluginManager object at 0x1009f0cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x1015339b0>
                │    │    │    │                     └ <_HookCaller 'pytest_pyfunc_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x1015339b0>
                └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>]
          │         └ <function pytest_pyfunc_call at 0x10145e7b8>
          └ <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 184, in pytest_pyfunc_call
    result = testfunction(**testargs)
             │              └ {'client': <FlaskClient <Flask 'tp_api.app'>>}
             └ <function test_get_project_specific at 0x102309158>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tests/test_flask.py", line 166, in test_get_project_specific
    headers={"Authorization": token},
                              └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.IX2Kw0Pi5pI9FToh8ac7DN9X9S4nZUmiJIgLZd45QP0'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1016, in post
    return self.open(*args, **kw)
           │    │     │       └ {'data': '{"name": "test-project-wnwAoiBN0kM"}', 'content_type': 'application/json', 'headers': {'Authorization': 'eyJ0eXAiOi...
           │    │     └ ('/project/read',)
           │    └ <function FlaskClient.open at 0x10232f730>
           └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/testing.py", line 227, in open
    follow_redirects=follow_redirects,
                     └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 970, in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
               │    │            │       │                └ False
               │    │            │       └ <method 'copy' of 'dict' objects>
               │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
               │    └ <function Client.run_wsgi_app at 0x101afc378>
               └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 861, in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
         │            │    │            │                 └ False
         │            │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
         │            │    └ <Flask 'tp_api.app'>
         │            └ <FlaskClient <Flask 'tp_api.app'>>
         └ <function run_wsgi_app at 0x101afc9d8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1096, in run_wsgi_app
    app_rv = app(environ, start_response)
             │   │        └ <function run_wsgi_app.<locals>.start_response at 0x102388730>
             │   └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
             └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function run_wsgi_app.<locals>.start_response at 0x102388730>
           │    │        └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
           │    └ <function Flask.wsgi_app at 0x101bead08>
           └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x101bea488>
               └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x101bea400>
         └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://localhost/project/read' [POST]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (HEAD, GET, POST, OPTIONS) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'tp_api.app'>>, 'mytest': <function mytest at 0x10227...
           └ <Flask 'tp_api.app'>

> File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 43, in inner
    return f(*args, **kwargs)
           │  │       └ {}
           │  └ ()
           └ <function get_project at 0x1023007b8>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 492, in get_project
    except DoestNotExist:

NameError: name 'DoestNotExist' is not defined
2020-04-27 06:42:25.276 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-04-27 06:42:25.498 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-04-27 06:42:25.511 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-icTkPsZ9mCw
2020-04-27 06:42:25.526 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-91pD38BvSR4'
2020-04-27 06:42:25.542 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-9tp0Stj6zFM'
2020-04-27 06:42:25.558 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-klzRgHONHfE'
2020-04-27 06:42:25.570 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-Gyy0ijNgSeo' for Threat Scenario 'threat-scenario-klzRgHONHfE'
2020-04-27 06:42:25.584 | ERROR    | tp_api.app:get_project:493 - name 'name' is not defined
Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/bin/py.test", line 8, in <module>
    sys.exit(main())
    │   │    └ <function main at 0x10a369488>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/config/__init__.py", line 125, in main
    config=config
           └ <_pytest.config.Config object at 0x10a51a400>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'config': <_pytest.config.Config object at 0x10a51a400>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x109e159d8>
           │    │         │     └ <_HookCaller 'pytest_cmdline_main'>
           │    │         └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1098c5cc0>>
           └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'config': <_pytest.config.Config object at 0x10a51a400>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x109825268>
           └ <_pytest.config.PytestPluginManager object at 0x1098c5cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10a506d30>
                │    │    │    │                     └ <_HookCaller 'pytest_cmdline_main'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10a506d30>
                └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<_pytest.config.Config object at 0x10a51a400>]
          │         └ <function pytest_cmdline_main at 0x10a432c80>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 240, in pytest_cmdline_main
    return wrap_session(config, _main)
           │            │       └ <function _main at 0x10a432d08>
           │            └ <_pytest.config.Config object at 0x10a51a400>
           └ <function wrap_session at 0x10a432bf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 191, in wrap_session
    session.exitstatus = doit(config, session) or 0
    │       │            │    │       └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>
    │       │            │    └ <_pytest.config.Config object at 0x10a51a400>
    │       │            └ <function _main at 0x10a432d08>
    │       └ <ExitCode.OK: 0>
    └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 247, in _main
    config.hook.pytest_runtestloop(session=session)
    │      │    │                          └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>
    │      │    └ <_HookCaller 'pytest_runtestloop'>
    │      └ <pluggy.hooks._HookRelay object at 0x10995dda0>
    └ <_pytest.config.Config object at 0x10a51a400>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x109e159d8>
           │    │         │     └ <_HookCaller 'pytest_runtestloop'>
           │    │         └ <_HookCaller 'pytest_runtestloop'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1098c5cc0>>
           └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_runtestloop'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x109825268>
           └ <_pytest.config.PytestPluginManager object at 0x1098c5cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10a51a048>
                │    │    │    │                     └ <_HookCaller 'pytest_runtestloop'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10a51a048>
                └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=9>]
          │         └ <function pytest_runtestloop at 0x10a432e18>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 272, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    │    │      │    │                            │              └ None
    │    │      │    │                            └ <Function test_get_project_specific>
    │    │      │    └ <_HookCaller 'pytest_runtest_protocol'>
    │    │      └ <pluggy.hooks._HookRelay object at 0x10995dda0>
    │    └ <_pytest.config.Config object at 0x10a51a400>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_get_project_specific>, 'nextitem': None}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x109e159d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_protocol'>
           │    │         └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1098c5cc0>>
           └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_get_project_specific>, 'nextitem': None}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x109825268>
           └ <_pytest.config.PytestPluginManager object at 0x1098c5cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10a50deb8>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_protocol'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10a50deb8>
                └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>, None]
          │         └ <function pytest_runtest_protocol at 0x10a4306a8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 85, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    │               │              └ None
    │               └ <Function test_get_project_specific>
    └ <function runtestprotocol at 0x10a430730>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 100, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    │       │      │               │             └ True
    │       │      │               └ <Function test_get_project_specific>
    │       │      └ <function call_and_report at 0x10a430ae8>
    │       └ <method 'append' of 'list' objects>
    └ [<TestReport 'tests/test_flask.py::test_get_project_specific' when='setup' outcome='passed'>]
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 186, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           │                 │     │       └ {}
           │                 │     └ 'call'
           │                 └ <Function test_get_project_specific>
           └ <function call_runtest_hook at 0x10a430bf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in call_runtest_hook
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       │           │             └ (<class '_pytest.outcomes.Exit'>, <class 'KeyboardInterrupt'>)
            │          │       │           └ 'call'
            │          │       └ {}
            │          └ <Function test_get_project_specific>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 244, in from_call
    result = func()
             └ <function call_runtest_hook.<locals>.<lambda> at 0x10b366840>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       └ {}
            │          └ <Function test_get_project_specific>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_get_project_specific>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x109e159d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_call'>
           │    │         └ <_HookCaller 'pytest_runtest_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1098c5cc0>>
           └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_get_project_specific>}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x109825268>
           └ <_pytest.config.PytestPluginManager object at 0x1098c5cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10a50dc88>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': False, 'historic': False}
                │    └ <pluggy.hooks.HookSpec object at 0x10a50dc88>
                └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>]
          │         └ <function pytest_runtest_call at 0x10a4308c8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 135, in pytest_runtest_call
    item.runtest()
    │    └ <function Function.runtest at 0x10a458048>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 1479, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    │    │                                   └ <Function test_get_project_specific>
    │    └ <property object at 0x10a40c188>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'pyfuncitem': <Function test_get_project_specific>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x109e159d8>
           │    │         │     └ <_HookCaller 'pytest_pyfunc_call'>
           │    │         └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x1098c5cc0>>
           └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'pyfuncitem': <Function test_get_project_specific>}
           │    │               │     └ [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x109825268>
           └ <_pytest.config.PytestPluginManager object at 0x1098c5cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x10a50d9e8>
                │    │    │    │                     └ <_HookCaller 'pytest_pyfunc_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x10a50d9e8>
                └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>]
          │         └ <function pytest_pyfunc_call at 0x10a4387b8>
          └ <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 184, in pytest_pyfunc_call
    result = testfunction(**testargs)
             │              └ {'client': <FlaskClient <Flask 'tp_api.app'>>}
             └ <function test_get_project_specific at 0x10b2ec1e0>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tests/test_flask.py", line 166, in test_get_project_specific
    headers={"Authorization": token},
                              └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.IX2Kw0Pi5pI9FToh8ac7DN9X9S4nZUmiJIgLZd45QP0'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1016, in post
    return self.open(*args, **kw)
           │    │     │       └ {'data': '{"name": "test-project-wnwAoiBN0kM"}', 'content_type': 'application/json', 'headers': {'Authorization': 'eyJ0eXAiOi...
           │    │     └ ('/project/read',)
           │    └ <function FlaskClient.open at 0x10b30d510>
           └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/testing.py", line 227, in open
    follow_redirects=follow_redirects,
                     └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 970, in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
               │    │            │       │                └ False
               │    │            │       └ <method 'copy' of 'dict' objects>
               │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
               │    └ <function Client.run_wsgi_app at 0x10aad7378>
               └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 861, in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
         │            │    │            │                 └ False
         │            │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
         │            │    └ <Flask 'tp_api.app'>
         │            └ <FlaskClient <Flask 'tp_api.app'>>
         └ <function run_wsgi_app at 0x10aad79d8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1096, in run_wsgi_app
    app_rv = app(environ, start_response)
             │   │        └ <function run_wsgi_app.<locals>.start_response at 0x10b366730>
             │   └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
             └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function run_wsgi_app.<locals>.start_response at 0x10b366730>
           │    │        └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
           │    └ <function Flask.wsgi_app at 0x10abc4d08>
           └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x10abc4488>
               └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x10abc4400>
         └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://localhost/project/read' [POST]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (GET, OPTIONS, POST, HEAD) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'tp_api.app'>>, 'mytest': <function mytest at 0x10b25...
           └ <Flask 'tp_api.app'>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 43, in inner
    return f(*args, **kwargs)
           │  │       └ {}
           │  └ ()
           └ <function get_project at 0x10b2e0840>

> File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 490, in get_project
    ref_project = json.loads(Project.objects.get(name=name).to_json())
                  │    │     │       └ <mongoengine.queryset.manager.QuerySetManager object at 0x109f5be10>
                  │    │     └ <class 'tp_api.models.Project'>
                  │    └ <function loads at 0x10a61b488>
                  └ <module 'json' from '/Users/abhaybhargav/.pyenv/versions/3.7.3/lib/python3.7/json/__init__.py'>

NameError: name 'name' is not defined
2020-04-27 06:43:25.250 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-04-27 06:43:25.474 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-04-27 06:43:25.489 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-LiTR1zAinVg
2020-04-27 06:43:25.505 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-56qyiIygF0g'
2020-04-27 06:43:25.522 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-TqN51c6GfQk'
2020-04-27 06:43:25.539 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-wtRPsRTYZO4'
2020-04-27 06:43:25.552 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-obbB_bSmB9c' for Threat Scenario 'threat-scenario-wtRPsRTYZO4'
2020-04-27 07:01:44.349 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-04-27 07:01:44.589 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-04-27 07:01:44.601 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-bwWHBJ9PgJc
2020-04-27 07:01:44.616 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-VQb_Sd9AmBo'
2020-04-27 07:01:44.632 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-ZOZlKm1--lA'
2020-04-27 07:01:44.649 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-SyS3pGz2EdI'
2020-04-27 07:01:44.663 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-Q1f1TvQ9bxA' for Threat Scenario 'threat-scenario-SyS3pGz2EdI'
2020-05-03 15:07:27.976 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 15:07:28.201 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 15:07:28.236 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-vb2s2j7cRVo
2020-05-03 15:07:28.274 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-VX5TS56waQc'
2020-05-03 15:07:28.318 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-_wL-ceUEtgE'
2020-05-03 15:07:28.343 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-gApGwMCztwo'
2020-05-03 15:07:28.364 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-9zAcJ2YSXiw' for Threat Scenario 'threat-scenario-gApGwMCztwo'
2020-05-03 15:07:28.381 | ERROR    | tp_api.app:get_project:496 - Project matching query does not exist.
Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 259, in get
    result = six.next(queryset)
             │   │    └ []
             │   └ <built-in function next>
             └ <module 'six' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/six.py'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 1574, in __next__
    raw_doc = six.next(self._cursor)
              │   │    │    └ <property object at 0x102240b38>
              │   │    └ []
              │   └ <built-in function next>
              └ <module 'six' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/six.py'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pymongo/cursor.py", line 1164, in next
    raise StopIteration

StopIteration


During handling of the above exception, another exception occurred:


Traceback (most recent call last):
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/bin/py.test", line 8, in <module>
    sys.exit(main())
    │   │    └ <function main at 0x1015ac488>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/config/__init__.py", line 125, in main
    config=config
           └ <_pytest.config.Config object at 0x10175e3c8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'config': <_pytest.config.Config object at 0x10175e3c8>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10104f9d8>
           │    │         │     └ <_HookCaller 'pytest_cmdline_main'>
           │    │         └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x101698cc0>>
           └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'config': <_pytest.config.Config object at 0x10175e3c8>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_cmdline_main'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100b6d268>
           └ <_pytest.config.PytestPluginManager object at 0x101698cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101749cc0>
                │    │    │    │                     └ <_HookCaller 'pytest_cmdline_main'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x101749cc0>
                └ <_HookCaller 'pytest_cmdline_main'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<_pytest.config.Config object at 0x10175e3c8>]
          │         └ <function pytest_cmdline_main at 0x101675c80>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 240, in pytest_cmdline_main
    return wrap_session(config, _main)
           │            │       └ <function _main at 0x101675d08>
           │            └ <_pytest.config.Config object at 0x10175e3c8>
           └ <function wrap_session at 0x101675bf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 191, in wrap_session
    session.exitstatus = doit(config, session) or 0
    │       │            │    │       └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=11>
    │       │            │    └ <_pytest.config.Config object at 0x10175e3c8>
    │       │            └ <function _main at 0x101675d08>
    │       └ <ExitCode.OK: 0>
    └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=11>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 247, in _main
    config.hook.pytest_runtestloop(session=session)
    │      │    │                          └ <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=11>
    │      │    └ <_HookCaller 'pytest_runtestloop'>
    │      └ <pluggy.hooks._HookRelay object at 0x100ca5d68>
    └ <_pytest.config.Config object at 0x10175e3c8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=11>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10104f9d8>
           │    │         │     └ <_HookCaller 'pytest_runtestloop'>
           │    │         └ <_HookCaller 'pytest_runtestloop'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x101698cc0>>
           └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'session': <Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=11>}
           │    │               │     └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/a...
           │    │               └ <_HookCaller 'pytest_runtestloop'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100b6d268>
           └ <_pytest.config.PytestPluginManager object at 0x101698cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101751fd0>
                │    │    │    │                     └ <_HookCaller 'pytest_runtestloop'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x101751fd0>
                └ <_HookCaller 'pytest_runtestloop'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Session apiv2 exitstatus=<ExitCode.OK: 0> testsfailed=0 testscollected=11>]
          │         └ <function pytest_runtestloop at 0x101675e18>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/ap...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/main.py", line 272, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    │    │      │    │                            │              └ <Function test_get_feature_by_project>
    │    │      │    │                            └ <Function test_get_project_specific>
    │    │      │    └ <_HookCaller 'pytest_runtest_protocol'>
    │    │      └ <pluggy.hooks._HookRelay object at 0x100ca5d68>
    │    └ <_pytest.config.Config object at 0x10175e3c8>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_get_project_specific>, 'nextitem': <Function test_get_feature_by_project>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10104f9d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_protocol'>
           │    │         └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x101698cc0>>
           └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_get_project_specific>, 'nextitem': <Function test_get_feature_by_project>}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_protocol'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100b6d268>
           └ <_pytest.config.PytestPluginManager object at 0x101698cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101751e80>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_protocol'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x101751e80>
                └ <_HookCaller 'pytest_runtest_protocol'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>, <Function test_get_feature_by_project>]
          │         └ <function pytest_runtest_protocol at 0x1016736a8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 85, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    │               │              └ <Function test_get_feature_by_project>
    │               └ <Function test_get_project_specific>
    └ <function runtestprotocol at 0x101673730>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 100, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
    │       │      │               │             └ True
    │       │      │               └ <Function test_get_project_specific>
    │       │      └ <function call_and_report at 0x101673ae8>
    │       └ <method 'append' of 'list' objects>
    └ [<TestReport 'tests/test_flask.py::test_get_project_specific' when='setup' outcome='passed'>]
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 186, in call_and_report
    call = call_runtest_hook(item, when, **kwds)
           │                 │     │       └ {}
           │                 │     └ 'call'
           │                 └ <Function test_get_project_specific>
           └ <function call_runtest_hook at 0x101673bf8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in call_runtest_hook
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       │           │             └ (<class '_pytest.outcomes.Exit'>, <class 'KeyboardInterrupt'>)
            │          │       │           └ 'call'
            │          │       └ {}
            │          └ <Function test_get_project_specific>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 244, in from_call
    result = func()
             └ <function call_runtest_hook.<locals>.<lambda> at 0x1025a0d90>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 217, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
            │          │       └ {}
            │          └ <Function test_get_project_specific>
            └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'item': <Function test_get_project_specific>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10104f9d8>
           │    │         │     └ <_HookCaller 'pytest_runtest_call'>
           │    │         └ <_HookCaller 'pytest_runtest_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x101698cc0>>
           └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'item': <Function test_get_project_specific>}
           │    │               │     └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_runtest_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100b6d268>
           └ <_pytest.config.PytestPluginManager object at 0x101698cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x101751c50>
                │    │    │    │                     └ <_HookCaller 'pytest_runtest_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': False, 'historic': False}
                │    └ <pluggy.hooks.HookSpec object at 0x101751c50>
                └ <_HookCaller 'pytest_runtest_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>]
          │         └ <function pytest_runtest_call at 0x1016738c8>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/runner.py", line 135, in pytest_runtest_call
    item.runtest()
    │    └ <function Function.runtest at 0x10169b048>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 1479, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
    │    │                                   └ <Function test_get_project_specific>
    │    └ <property object at 0x10164f278>
    └ <Function test_get_project_specific>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/hooks.py", line 286, in __call__
    return self._hookexec(self, self.get_hookimpls(), kwargs)
           │    │         │     │    │                └ {'pyfuncitem': <Function test_get_project_specific>}
           │    │         │     │    └ <function _HookCaller.get_hookimpls at 0x10104f9d8>
           │    │         │     └ <_HookCaller 'pytest_pyfunc_call'>
           │    │         └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <bound method PluginManager._hookexec of <_pytest.config.PytestPluginManager object at 0x101698cc0>>
           └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 93, in _hookexec
    return self._inner_hookexec(hook, methods, kwargs)
           │    │               │     │        └ {'pyfuncitem': <Function test_get_project_specific>}
           │    │               │     └ [<HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlaybo...
           │    │               └ <_HookCaller 'pytest_pyfunc_call'>
           │    └ <function PluginManager.__init__.<locals>.<lambda> at 0x100b6d268>
           └ <_pytest.config.PytestPluginManager object at 0x101698cc0>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/manager.py", line 87, in <lambda>
    firstresult=hook.spec.opts.get("firstresult") if hook.spec else False,
                │    │    │    │                     │    └ <pluggy.hooks.HookSpec object at 0x1017519b0>
                │    │    │    │                     └ <_HookCaller 'pytest_pyfunc_call'>
                │    │    │    └ <method 'get' of 'dict' objects>
                │    │    └ {'firstresult': True, 'historic': False, 'warn_on_impl': None}
                │    └ <pluggy.hooks.HookSpec object at 0x1017519b0>
                └ <_HookCaller 'pytest_pyfunc_call'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/pluggy/callers.py", line 187, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Function test_get_project_specific>]
          │         └ <function pytest_pyfunc_call at 0x1016767b8>
          └ <HookImpl plugin_name='python', plugin=<module '_pytest.python' from '/Users/abhaybhargav/Documents/code/python/ThreatPlayboo...
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/_pytest/python.py", line 184, in pytest_pyfunc_call
    result = testfunction(**testargs)
             │              └ {'client': <FlaskClient <Flask 'tp_api.app'>>}
             └ <function test_get_project_specific at 0x10252b400>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tests/test_flask.py", line 166, in test_get_project_specific
    headers={"Authorization": token},
                              └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.6Jyx1XGMcKFpW-Q6txf79-sT6A1MDIBPExQfVdabZKA'

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1016, in post
    return self.open(*args, **kw)
           │    │     │       └ {'data': '{"name": "test-project-wnwAoiBN0kM"}', 'content_type': 'application/json', 'headers': {'Authorization': 'eyJ0eXAiOi...
           │    │     └ ('/project/read',)
           │    └ <function FlaskClient.open at 0x102552840>
           └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/testing.py", line 227, in open
    follow_redirects=follow_redirects,
                     └ False
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 970, in open
    response = self.run_wsgi_app(environ.copy(), buffered=buffered)
               │    │            │       │                └ False
               │    │            │       └ <method 'copy' of 'dict' objects>
               │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
               │    └ <function Client.run_wsgi_app at 0x101d19378>
               └ <FlaskClient <Flask 'tp_api.app'>>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 861, in run_wsgi_app
    rv = run_wsgi_app(self.application, environ, buffered=buffered)
         │            │    │            │                 └ False
         │            │    │            └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
         │            │    └ <Flask 'tp_api.app'>
         │            └ <FlaskClient <Flask 'tp_api.app'>>
         └ <function run_wsgi_app at 0x101d199d8>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/werkzeug/test.py", line 1096, in run_wsgi_app
    app_rv = app(environ, start_response)
             │   │        └ <function run_wsgi_app.<locals>.start_response at 0x1025a0c80>
             │   └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
             └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function run_wsgi_app.<locals>.start_response at 0x1025a0c80>
           │    │        └ {'REMOTE_ADDR': '127.0.0.1', 'HTTP_USER_AGENT': 'werkzeug/1.0.1', 'REQUEST_METHOD': 'POST', 'SCRIPT_NAME': '', 'PATH_INFO': '...
           │    └ <function Flask.wsgi_app at 0x101e07d08>
           └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x101e07488>
               └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x101e07400>
         └ <Flask 'tp_api.app'>
  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://localhost/project/read' [POST]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (OPTIONS, GET, HEAD, POST) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'tp_api.app'>>, 'mytest': <function mytest at 0x10249...
           └ <Flask 'tp_api.app'>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 43, in inner
    return f(*args, **kwargs)
           │  │       └ {}
           │  └ ()
           └ <function get_project at 0x102521620>

> File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/tp_api/app.py", line 491, in get_project
    Project.objects.get(name=data.get("name")).to_json()
    │       │                │    └ <method 'get' of 'dict' objects>
    │       │                └ {'name': 'test-project-wnwAoiBN0kM'}
    │       └ <mongoengine.queryset.manager.QuerySetManager object at 0x1023ff080>
    └ <class 'tp_api.models.Project'>

  File "/Users/abhaybhargav/Documents/code/python/ThreatPlaybook/apiv2/venv/lib/python3.7/site-packages/mongoengine/queryset/base.py", line 262, in get
    raise queryset._document.DoesNotExist(msg)
          │        │         │            └ 'Project matching query does not exist.'
          │        │         └ <class 'tp_api.models.DoesNotExist'>
          │        └ <class 'tp_api.models.Project'>
          └ []

tp_api.models.DoesNotExist: Project matching query does not exist.
2020-05-03 15:08:02.746 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 15:08:02.963 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 15:08:02.976 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-_1iUZMqhZoQ
2020-05-03 15:08:02.991 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-MjQZozdoNq0'
2020-05-03 15:08:03.007 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-vpVt22mb76Y'
2020-05-03 15:08:03.023 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-HAhL5iGJuWE'
2020-05-03 15:08:03.036 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-OYD3vulIW3A' for Threat Scenario 'threat-scenario-HAhL5iGJuWE'
2020-05-03 15:09:17.517 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 15:09:17.732 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 15:09:17.746 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-HmDKygj3gss
2020-05-03 15:09:17.761 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-HhoN5YUfq_Q'
2020-05-03 15:09:17.778 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-AlG0sARSHlo'
2020-05-03 15:09:17.796 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-FxalBeqm5aU'
2020-05-03 15:09:17.808 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-FbpU8nHH7xQ' for Threat Scenario 'threat-scenario-FxalBeqm5aU'
2020-05-03 15:18:06.034 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 15:18:06.268 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 15:18:06.285 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-qFoJ6diYW-o
2020-05-03 15:18:06.300 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-H7eWSCCUaE8'
2020-05-03 15:18:06.318 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-j63pMkV4JYg'
2020-05-03 15:18:06.336 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-1lLCshsXoeU'
2020-05-03 15:18:06.350 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-a6gvnhRgXws' for Threat Scenario 'threat-scenario-1lLCshsXoeU'
2020-05-03 16:06:06.348 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 16:06:06.573 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 16:06:06.587 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-vm-3qZ63hYE
2020-05-03 16:06:06.602 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-kKKxACAv5SU'
2020-05-03 16:06:06.618 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-wKgwvZE31Mo'
2020-05-03 16:06:06.636 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-Q0N57VDEc6g'
2020-05-03 16:06:06.651 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-uXvKGwFOJFc' for Threat Scenario 'threat-scenario-Q0N57VDEc6g'
2020-05-03 16:08:24.594 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 16:08:24.824 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 16:08:24.841 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project--jebSuFSUbw
2020-05-03 16:08:24.857 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-HhN_J_uoxKk'
2020-05-03 16:08:24.873 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-citFyHOPN2A'
2020-05-03 16:08:24.892 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-6chfEkD47Bc'
2020-05-03 16:08:24.905 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-b0hc9Sf3GCY' for Threat Scenario 'threat-scenario-6chfEkD47Bc'
2020-05-03 16:08:56.448 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 16:08:56.674 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 16:08:56.689 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-XuSPETFvUgU
2020-05-03 16:08:56.704 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-BomuoAlLx_I'
2020-05-03 16:08:56.721 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-rspxojFSuJY'
2020-05-03 16:08:56.739 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-6d-dvlAH3eU'
2020-05-03 16:08:56.753 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-PFUEZX50VzM' for Threat Scenario 'threat-scenario-6d-dvlAH3eU'
2020-05-03 18:48:43.849 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 18:48:44.071 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 18:48:44.085 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-xS4B4Wcq1Ig
2020-05-03 18:48:44.101 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-MQJnkyjYads'
2020-05-03 18:48:44.119 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-f81cV7tmDbE'
2020-05-03 18:48:44.138 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-4uPGAf18M00'
2020-05-03 18:48:44.151 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-u7BRy_DLCUg' for Threat Scenario 'threat-scenario-4uPGAf18M00'
2020-05-03 19:19:26.836 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 19:19:27.068 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 19:19:27.081 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-Qwnx7ULwjRA
2020-05-03 19:19:27.096 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-rnGF9b6RbTc'
2020-05-03 19:19:27.113 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-ZWzBsfMCcy8'
2020-05-03 19:19:27.131 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-Y1wzl33e5gw'
2020-05-03 19:19:27.146 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-ZZsNlZi5WuE' for Threat Scenario 'threat-scenario-Y1wzl33e5gw'
2020-05-03 19:20:27.585 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 19:20:27.832 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 19:20:27.845 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-fgqfFhnhYLg
2020-05-03 19:20:27.861 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-0LJk5DjY0VY'
2020-05-03 19:20:27.881 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-_9nrzpk4SYw'
2020-05-03 19:20:27.899 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-v7JHKZ4JXfA'
2020-05-03 19:20:27.914 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-j7l68ttc9bA' for Threat Scenario 'threat-scenario-v7JHKZ4JXfA'
2020-05-03 19:46:37.253 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 19:46:37.473 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 19:46:37.486 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-GnIERdItkKs
2020-05-03 19:46:37.500 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-0eGs5vOzOMA'
2020-05-03 19:46:37.517 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-iY13pM9sMfw'
2020-05-03 19:46:37.536 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-bZFgHJLozZ0'
2020-05-03 19:46:37.551 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-DyAh1bBcKHo' for Threat Scenario 'threat-scenario-bZFgHJLozZ0'
2020-05-03 19:49:02.884 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 19:49:03.117 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 19:49:03.131 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-J6m6QT8G4as
2020-05-03 19:49:03.149 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-QsYxZqEhVpI'
2020-05-03 19:49:03.167 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-8-cRn50ptHU'
2020-05-03 19:49:03.184 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-YdknVU6-QXk'
2020-05-03 19:49:03.199 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-gNlqPlBk5aA' for Threat Scenario 'threat-scenario-YdknVU6-QXk'
2020-05-03 19:50:20.403 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 19:50:20.633 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 19:50:20.646 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-i2gwOTauqWQ
2020-05-03 19:50:20.663 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-NnI8VlONQL8'
2020-05-03 19:50:20.681 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-8olnEpBHJZ0'
2020-05-03 19:50:20.700 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-QNu0-iud3Es'
2020-05-03 19:50:20.717 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-zXoHTC3spRw' for Threat Scenario 'threat-scenario-QNu0-iud3Es'
2020-05-03 19:50:51.179 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 19:50:51.407 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 19:50:51.419 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-l1UwIdtgo5I
2020-05-03 19:50:51.434 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature--724Htl92p0'
2020-05-03 19:50:51.452 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-Lg2eWuRloPc'
2020-05-03 19:50:51.471 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-ZsOVW_I7q5E'
2020-05-03 19:50:51.487 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-SI0t2IXyBEQ' for Threat Scenario 'threat-scenario-ZsOVW_I7q5E'
2020-05-03 19:51:11.890 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 19:51:12.111 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 19:51:12.123 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-VER9ZWTs8yM
2020-05-03 19:51:12.140 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-8C0UjPCyHLM'
2020-05-03 19:51:12.159 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-I55GaMjAp9c'
2020-05-03 19:51:12.177 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-8FtEH0Kmryc'
2020-05-03 19:51:12.192 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-XfqdOwr8qO8' for Threat Scenario 'threat-scenario-8FtEH0Kmryc'
2020-05-03 19:51:47.270 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 19:51:47.494 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 19:51:47.508 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-X0LrT_JCCYo
2020-05-03 19:51:47.524 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-wCJPJg_42w8'
2020-05-03 19:51:47.541 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-7Tc0AicGSL8'
2020-05-03 19:51:47.559 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-QP_MNth5RUA'
2020-05-03 19:51:47.574 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-2PCUIowyo0c' for Threat Scenario 'threat-scenario-QP_MNth5RUA'
2020-05-03 19:52:30.362 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 19:52:30.582 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 19:52:30.596 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-v8qDraj6w2g
2020-05-03 19:52:30.612 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-fDm1w-8upyI'
2020-05-03 19:52:30.630 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-QcA0hLVJ-Jw'
2020-05-03 19:52:30.648 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-sDWPHmGGFcA'
2020-05-03 19:52:30.664 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-2YmHpr5TLi8' for Threat Scenario 'threat-scenario-sDWPHmGGFcA'
2020-05-03 19:52:38.722 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-03 19:52:38.944 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-03 19:52:38.957 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-UULoOTFY6HY
2020-05-03 19:52:38.974 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature--LY0KpJEFqA'
2020-05-03 19:52:38.991 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-A1HyjuVJ9hQ'
2020-05-03 19:52:39.009 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-iaIo1_hBsHA'
2020-05-03 19:52:39.024 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-icUi31XxPfA' for Threat Scenario 'threat-scenario-iaIo1_hBsHA'
2020-05-04 14:56:27.240 | INFO     | tp_api.app:change_password:102 - Changed password for user admin@admin.com
2020-05-04 14:56:27.551 | INFO     | tp_api.app:login:157 - User 'admin@admin.com' successfully logged in
2020-05-04 14:56:27.609 | INFO     | tp_api.app:create_project:190 - Successfully created project test-project-4CRGntbrWQ0
2020-05-04 14:56:27.681 | INFO     | tp_api.app:create_user_story:234 - Successfully created user-story/feature 'test-feature-_zk3SXIDE1Y'
2020-05-04 14:56:27.743 | INFO     | tp_api.app:create_abuser_story:285 - Successfully created abuser-story 'test-abuser-story-lp0WkLx-aRo'
2020-05-04 14:56:27.780 | INFO     | tp_api.app:create_threat_scenario:365 - Created Threat Scenario 'threat-scenario-MyUIaE9jd0M'
2020-05-04 14:56:27.812 | INFO     | tp_api.app:create_test_case:437 - Created Test-Case 'test-case-rN6MT67Y8mc' for Threat Scenario 'threat-scenario-MyUIaE9jd0M'
2020-05-04 14:57:12.343 | INFO     | __main__:login:157 - User 'admin@admin.com' successfully logged in
2020-05-04 15:22:25.453 | INFO     | __main__:login:158 - User 'admin@admin.com' successfully logged in
2020-05-04 15:23:09.203 | INFO     | __main__:login:158 - User 'admin@admin.com' successfully logged in
2020-05-04 15:23:23.646 | INFO     | __main__:login:158 - User 'admin@admin.com' successfully logged in
2020-05-04 15:33:21.653 | INFO     | __main__:login:158 - User 'admin@admin.com' successfully logged in
2020-05-04 16:03:33.958 | INFO     | __main__:login:158 - User 'admin@admin.com' successfully logged in
2020-05-04 16:06:45.075 | INFO     | __main__:create_project:191 - Successfully created project demo
2020-05-04 16:12:17.553 | INFO     | __main__:login:158 - User 'admin@admin.com' successfully logged in
2020-05-04 16:58:25.775 | ERROR    | __main__:inner:46 - Signature verification failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1025010e0>
    └ <Thread(Thread-2, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1024fce60>
    └ <Thread(Thread-2, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-2, started daemon 123145510928384)>
    │    │        │    └ (<socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    │        └ <Thread(Thread-2, started daemon 123145510928384)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>>
    └ <Thread(Thread-2, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 54660)
    │    │              └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <function BaseServer.finish_request at 0x102ed8200>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │    │                   │        └ ('127.0.0.1', 54660)
    │    │                   └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x103135ef0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103d2ded0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x103d2ded0>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x102ad4a70>
    └ <class 'http.server.BaseHTTPRequestHandler'>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x1031330e0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103d2ded0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x103135e60>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x103d2ded0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x103d2ded0>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x103d30050>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x103d2e2d0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103d2bd40>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103d2bd40>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
           │    └ <function Flask.wsgi_app at 0x1033d8830>
           └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x1033d5ef0>
               └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x1033d5e60>
         └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://127.0.0.1:5000/feature/read' [GET]>
           │    │              │    └ 'get_features'
           │    │              └ <Rule '/feature/read' (HEAD, POST, GET, OPTIONS) -> get_features>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x103c6e710>, ...
           └ <Flask 'app'>

> File "/Users/tilakt/Documents/github/ThreatPlaybook/apiv2/tp_api/app.py", line 42, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │      │      └ 'EQDisRmJLndWtmGYC6oW9g'
              │   │      └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x1033ed150>>
              └ <module 'jwt' from '/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/__init__.py'>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jwt.py", line 92, in decode
    jwt, key=key, algorithms=algorithms, options=options, **kwargs
    │        │               │                   │          └ {}
    │        │               │                   └ {'verify_signature': True}
    │        │               └ ['HS256']
    │        └ 'EQDisRmJLndWtmGYC6oW9g'
    └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 156, in decode
    key, algorithms)
    │    └ ['HS256']
    └ 'EQDisRmJLndWtmGYC6oW9g'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 223, in _verify_signature
    raise InvalidSignatureError('Signature verification failed')
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2020-05-04 16:58:41.012 | ERROR    | __main__:inner:46 - Signature verification failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1025010e0>
    └ <Thread(Thread-3, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1024fce60>
    └ <Thread(Thread-3, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-3, started daemon 123145510928384)>
    │    │        │    └ (<socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    │        └ <Thread(Thread-3, started daemon 123145510928384)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>>
    └ <Thread(Thread-3, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 54664)
    │    │              └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <function BaseServer.finish_request at 0x102ed8200>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │    │                   │        └ ('127.0.0.1', 54664)
    │    │                   └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x103135ef0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103d2dbd0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x103d2dbd0>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x102ad4a70>
    └ <class 'http.server.BaseHTTPRequestHandler'>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x1031330e0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103d2dbd0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x103135e60>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x103d2dbd0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x103d2dbd0>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x103dfbd40>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x103d2e2d0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103dfbcb0>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103dfbcb0>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
           │    └ <function Flask.wsgi_app at 0x1033d8830>
           └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x1033d5ef0>
               └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x1033d5e60>
         └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://127.0.0.1:5000/project/read' [GET]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (HEAD, POST, GET, OPTIONS) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x103c6e710>, ...
           └ <Flask 'app'>

> File "/Users/tilakt/Documents/github/ThreatPlaybook/apiv2/tp_api/app.py", line 42, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │      │      └ 'EQDisRmJLndWtmGYC6oW9g'
              │   │      └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x1033ed150>>
              └ <module 'jwt' from '/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/__init__.py'>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jwt.py", line 92, in decode
    jwt, key=key, algorithms=algorithms, options=options, **kwargs
    │        │               │                   │          └ {}
    │        │               │                   └ {'verify_signature': True}
    │        │               └ ['HS256']
    │        └ 'EQDisRmJLndWtmGYC6oW9g'
    └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 156, in decode
    key, algorithms)
    │    └ ['HS256']
    └ 'EQDisRmJLndWtmGYC6oW9g'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 223, in _verify_signature
    raise InvalidSignatureError('Signature verification failed')
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2020-05-04 16:58:45.077 | INFO     | __main__:login:158 - User 'admin@admin.com' successfully logged in
2020-05-04 16:59:25.444 | ERROR    | __main__:inner:46 - Signature verification failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1025010e0>
    └ <Thread(Thread-7, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1024fce60>
    └ <Thread(Thread-7, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-7, started daemon 123145510928384)>
    │    │        │    └ (<socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    │        └ <Thread(Thread-7, started daemon 123145510928384)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>>
    └ <Thread(Thread-7, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 54681)
    │    │              └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <function BaseServer.finish_request at 0x102ed8200>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │    │                   │        └ ('127.0.0.1', 54681)
    │    │                   └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x103135ef0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e40450>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x103e40450>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x102ad4a70>
    └ <class 'http.server.BaseHTTPRequestHandler'>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x1031330e0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e40450>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x103135e60>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x103e40450>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x103e40450>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x103e3cb00>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x103d2e2d0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e3c9e0>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e3c9e0>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
           │    └ <function Flask.wsgi_app at 0x1033d8830>
           └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x1033d5ef0>
               └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x1033d5e60>
         └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://127.0.0.1:5000/project/read' [GET]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (HEAD, POST, GET, OPTIONS) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x103c6e710>, ...
           └ <Flask 'app'>

> File "/Users/tilakt/Documents/github/ThreatPlaybook/apiv2/tp_api/app.py", line 42, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │      │      └ 'EQDisRmJLndWtmGYC6oW9g'
              │   │      └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x1033ed150>>
              └ <module 'jwt' from '/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/__init__.py'>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jwt.py", line 92, in decode
    jwt, key=key, algorithms=algorithms, options=options, **kwargs
    │        │               │                   │          └ {}
    │        │               │                   └ {'verify_signature': True}
    │        │               └ ['HS256']
    │        └ 'EQDisRmJLndWtmGYC6oW9g'
    └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 156, in decode
    key, algorithms)
    │    └ ['HS256']
    └ 'EQDisRmJLndWtmGYC6oW9g'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 223, in _verify_signature
    raise InvalidSignatureError('Signature verification failed')
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2020-05-04 16:59:43.562 | ERROR    | __main__:inner:46 - Signature verification failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1025010e0>
    └ <Thread(Thread-9, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1024fce60>
    └ <Thread(Thread-9, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-9, started daemon 123145510928384)>
    │    │        │    └ (<socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    │        └ <Thread(Thread-9, started daemon 123145510928384)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>>
    └ <Thread(Thread-9, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 54691)
    │    │              └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <function BaseServer.finish_request at 0x102ed8200>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │    │                   │        └ ('127.0.0.1', 54691)
    │    │                   └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x103135ef0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4c3d0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4c3d0>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x102ad4a70>
    └ <class 'http.server.BaseHTTPRequestHandler'>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x1031330e0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4c3d0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x103135e60>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4c3d0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4c3d0>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x103e4d170>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x103d2e2d0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e4d0e0>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e4d0e0>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
           │    └ <function Flask.wsgi_app at 0x1033d8830>
           └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x1033d5ef0>
               └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x1033d5e60>
         └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://127.0.0.1:5000/project/read' [GET]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (HEAD, POST, GET, OPTIONS) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x103c6e710>, ...
           └ <Flask 'app'>

> File "/Users/tilakt/Documents/github/ThreatPlaybook/apiv2/tp_api/app.py", line 42, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │      │      └ 'EQDisRmJLndWtmGYC6oW9g'
              │   │      └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x1033ed150>>
              └ <module 'jwt' from '/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/__init__.py'>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jwt.py", line 92, in decode
    jwt, key=key, algorithms=algorithms, options=options, **kwargs
    │        │               │                   │          └ {}
    │        │               │                   └ {'verify_signature': True}
    │        │               └ ['HS256']
    │        └ 'EQDisRmJLndWtmGYC6oW9g'
    └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 156, in decode
    key, algorithms)
    │    └ ['HS256']
    └ 'EQDisRmJLndWtmGYC6oW9g'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 223, in _verify_signature
    raise InvalidSignatureError('Signature verification failed')
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2020-05-04 17:00:53.596 | ERROR    | __main__:inner:46 - Signature verification failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1025010e0>
    └ <Thread(Thread-11, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1024fce60>
    └ <Thread(Thread-11, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-11, started daemon 123145510928384)>
    │    │        │    └ (<socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    │        └ <Thread(Thread-11, started daemon 123145510928384)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>>
    └ <Thread(Thread-11, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 54713)
    │    │              └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <function BaseServer.finish_request at 0x102ed8200>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │    │                   │        └ ('127.0.0.1', 54713)
    │    │                   └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x103135ef0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4eed0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4eed0>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x102ad4a70>
    └ <class 'http.server.BaseHTTPRequestHandler'>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x1031330e0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4eed0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x103135e60>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4eed0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4eed0>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x103e3cd40>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x103d2e350>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e3ce60>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e3ce60>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
           │    └ <function Flask.wsgi_app at 0x1033d8830>
           └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x1033d5ef0>
               └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x1033d5e60>
         └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://127.0.0.1:5000/project/read' [GET]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (HEAD, POST, GET, OPTIONS) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x103c6e710>, ...
           └ <Flask 'app'>

> File "/Users/tilakt/Documents/github/ThreatPlaybook/apiv2/tp_api/app.py", line 42, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │      │      └ 'EQDisRmJLndWtmGYC6oW9g'
              │   │      └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x1033ed150>>
              └ <module 'jwt' from '/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/__init__.py'>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jwt.py", line 92, in decode
    jwt, key=key, algorithms=algorithms, options=options, **kwargs
    │        │               │                   │          └ {}
    │        │               │                   └ {'verify_signature': True}
    │        │               └ ['HS256']
    │        └ 'EQDisRmJLndWtmGYC6oW9g'
    └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 156, in decode
    key, algorithms)
    │    └ ['HS256']
    └ 'EQDisRmJLndWtmGYC6oW9g'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 223, in _verify_signature
    raise InvalidSignatureError('Signature verification failed')
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2020-05-04 17:00:54.044 | ERROR    | __main__:inner:46 - Signature verification failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1025010e0>
    └ <Thread(Thread-12, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1024fce60>
    └ <Thread(Thread-12, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-12, started daemon 123145510928384)>
    │    │        │    └ (<socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    │        └ <Thread(Thread-12, started daemon 123145510928384)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>>
    └ <Thread(Thread-12, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 54714)
    │    │              └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <function BaseServer.finish_request at 0x102ed8200>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │    │                   │        └ ('127.0.0.1', 54714)
    │    │                   └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x103135ef0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4e290>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4e290>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x102ad4a70>
    └ <class 'http.server.BaseHTTPRequestHandler'>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x1031330e0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4e290>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x103135e60>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4e290>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x103e4e290>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x103e3c710>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x103d2e350>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e3c170>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e3c170>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
           │    └ <function Flask.wsgi_app at 0x1033d8830>
           └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x1033d5ef0>
               └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x1033d5e60>
         └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://127.0.0.1:5000/project/read' [GET]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (HEAD, POST, GET, OPTIONS) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x103c6e710>, ...
           └ <Flask 'app'>

> File "/Users/tilakt/Documents/github/ThreatPlaybook/apiv2/tp_api/app.py", line 42, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │      │      └ 'EQDisRmJLndWtmGYC6oW9g'
              │   │      └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x1033ed150>>
              └ <module 'jwt' from '/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/__init__.py'>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jwt.py", line 92, in decode
    jwt, key=key, algorithms=algorithms, options=options, **kwargs
    │        │               │                   │          └ {}
    │        │               │                   └ {'verify_signature': True}
    │        │               └ ['HS256']
    │        └ 'EQDisRmJLndWtmGYC6oW9g'
    └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 156, in decode
    key, algorithms)
    │    └ ['HS256']
    └ 'EQDisRmJLndWtmGYC6oW9g'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 223, in _verify_signature
    raise InvalidSignatureError('Signature verification failed')
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2020-05-04 17:00:58.466 | ERROR    | __main__:inner:46 - Signature verification failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1025010e0>
    └ <Thread(Thread-13, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1024fce60>
    └ <Thread(Thread-13, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-13, started daemon 123145510928384)>
    │    │        │    └ (<socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    │        └ <Thread(Thread-13, started daemon 123145510928384)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>>
    └ <Thread(Thread-13, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 54715)
    │    │              └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <function BaseServer.finish_request at 0x102ed8200>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │    │                   │        └ ('127.0.0.1', 54715)
    │    │                   └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x103135ef0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e43050>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x103e43050>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x102ad4a70>
    └ <class 'http.server.BaseHTTPRequestHandler'>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x1031330e0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e43050>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x103135e60>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x103e43050>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x103e43050>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x103e3c050>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x103d2e350>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e3c440>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e3c440>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
           │    └ <function Flask.wsgi_app at 0x1033d8830>
           └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x1033d5ef0>
               └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x1033d5e60>
         └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://127.0.0.1:5000/project/read' [GET]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (HEAD, POST, GET, OPTIONS) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x103c6e710>, ...
           └ <Flask 'app'>

> File "/Users/tilakt/Documents/github/ThreatPlaybook/apiv2/tp_api/app.py", line 42, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │      │      └ 'EQDisRmJLndWtmGYC6oW9g'
              │   │      └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x1033ed150>>
              └ <module 'jwt' from '/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/__init__.py'>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jwt.py", line 92, in decode
    jwt, key=key, algorithms=algorithms, options=options, **kwargs
    │        │               │                   │          └ {}
    │        │               │                   └ {'verify_signature': True}
    │        │               └ ['HS256']
    │        └ 'EQDisRmJLndWtmGYC6oW9g'
    └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 156, in decode
    key, algorithms)
    │    └ ['HS256']
    └ 'EQDisRmJLndWtmGYC6oW9g'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 223, in _verify_signature
    raise InvalidSignatureError('Signature verification failed')
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2020-05-04 17:01:13.852 | ERROR    | __main__:inner:46 - Signature verification failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1025010e0>
    └ <Thread(Thread-15, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1024fce60>
    └ <Thread(Thread-15, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-15, started daemon 123145510928384)>
    │    │        │    └ (<socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    │        └ <Thread(Thread-15, started daemon 123145510928384)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>>
    └ <Thread(Thread-15, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 54722)
    │    │              └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <function BaseServer.finish_request at 0x102ed8200>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │    │                   │        └ ('127.0.0.1', 54722)
    │    │                   └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x103135ef0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e3afd0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x103e3afd0>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x102ad4a70>
    └ <class 'http.server.BaseHTTPRequestHandler'>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x1031330e0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e3afd0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x103135e60>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x103e3afd0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x103e3afd0>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x103d30950>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x103d2e350>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103d30050>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103d30050>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
           │    └ <function Flask.wsgi_app at 0x1033d8830>
           └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x1033d5ef0>
               └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x1033d5e60>
         └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://127.0.0.1:5000/project/read' [GET]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (HEAD, POST, GET, OPTIONS) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x103c6e710>, ...
           └ <Flask 'app'>

> File "/Users/tilakt/Documents/github/ThreatPlaybook/apiv2/tp_api/app.py", line 42, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │      │      └ 'EQDisRmJLndWtmGYC6oW9g'
              │   │      └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x1033ed150>>
              └ <module 'jwt' from '/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/__init__.py'>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jwt.py", line 92, in decode
    jwt, key=key, algorithms=algorithms, options=options, **kwargs
    │        │               │                   │          └ {}
    │        │               │                   └ {'verify_signature': True}
    │        │               └ ['HS256']
    │        └ 'EQDisRmJLndWtmGYC6oW9g'
    └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 156, in decode
    key, algorithms)
    │    └ ['HS256']
    └ 'EQDisRmJLndWtmGYC6oW9g'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 223, in _verify_signature
    raise InvalidSignatureError('Signature verification failed')
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2020-05-04 17:01:18.282 | ERROR    | __main__:inner:46 - Signature verification failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x1025010e0>
    └ <Thread(Thread-16, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x1024fce60>
    └ <Thread(Thread-16, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-16, started daemon 123145510928384)>
    │    │        │    └ (<socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    │        └ <Thread(Thread-16, started daemon 123145510928384)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>>
    └ <Thread(Thread-16, started daemon 123145510928384)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 54731)
    │    │              └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <function BaseServer.finish_request at 0x102ed8200>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │    │                   │        └ ('127.0.0.1', 54731)
    │    │                   └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x103135ef0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e3a3d0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x103e3a3d0>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x102ad4a70>
    └ <class 'http.server.BaseHTTPRequestHandler'>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x1031330e0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x103e3a3d0>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x103135e60>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x103e3a3d0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x103d2db10>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x103e3a3d0>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x103e4d200>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x103d2e350>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e4d170>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x103cef150>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x103e4d170>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
           │    └ <function Flask.wsgi_app at 0x1033d8830>
           └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x1033d5ef0>
               └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x1033d5e60>
         └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://127.0.0.1:5000/project/read' [GET]>
           │    │              │    └ 'get_project'
           │    │              └ <Rule '/project/read' (HEAD, POST, GET, OPTIONS) -> get_project>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x103c6e710>, ...
           └ <Flask 'app'>

> File "/Users/tilakt/Documents/github/ThreatPlaybook/apiv2/tp_api/app.py", line 42, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │      │      └ 'EQDisRmJLndWtmGYC6oW9g'
              │   │      └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x1033ed150>>
              └ <module 'jwt' from '/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/__init__.py'>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jwt.py", line 92, in decode
    jwt, key=key, algorithms=algorithms, options=options, **kwargs
    │        │               │                   │          └ {}
    │        │               │                   └ {'verify_signature': True}
    │        │               └ ['HS256']
    │        └ 'EQDisRmJLndWtmGYC6oW9g'
    └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.YQm_QBYfvM5FWxDyhxVZK5NkmhwdnjgFZRg2Jb4RWMY'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 156, in decode
    key, algorithms)
    │    └ ['HS256']
    └ 'EQDisRmJLndWtmGYC6oW9g'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 223, in _verify_signature
    raise InvalidSignatureError('Signature verification failed')
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2020-05-04 17:01:37.932 | INFO     | __main__:login:158 - User 'admin@admin.com' successfully logged in
2020-05-04 17:04:29.008 | ERROR    | __main__:inner:46 - Signature verification failed
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x10baab0e0>
    └ <Thread(Thread-2, started daemon 123145398575104)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 926, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x10baa6e60>
    └ <Thread(Thread-2, started daemon 123145398575104)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-2, started daemon 123145398575104)>
    │    │        │    └ (<socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    │        └ <Thread(Thread-2, started daemon 123145398575104)>
    │    └ <bound method ThreadingMixIn.process_request_thread of <werkzeug.serving.ThreadedWSGIServer object at 0x10d256e90>>
    └ <Thread(Thread-2, started daemon 123145398575104)>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 650, in process_request_thread
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 54781)
    │    │              └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <function BaseServer.finish_request at 0x10c402200>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x10d256e90>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.ThreadedWSGIServer object at 0x10d256e90>
    │    │                   │        └ ('127.0.0.1', 54781)
    │    │                   └ <socket.socket fd=10, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=('...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.ThreadedWSGIServer object at 0x10d256e90>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x10c65fef0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x10d25e210>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 345, in handle
    BaseHTTPRequestHandler.handle(self)
    │                      │      └ <werkzeug.serving.WSGIRequestHandler object at 0x10d25e210>
    │                      └ <function BaseHTTPRequestHandler.handle at 0x10bfffa70>
    └ <class 'http.server.BaseHTTPRequestHandler'>

  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/http/server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function WSGIRequestHandler.handle_one_request at 0x10c65d0e0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x10d25e210>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 379, in handle_one_request
    return self.run_wsgi()
           │    └ <function WSGIRequestHandler.run_wsgi at 0x10c65fe60>
           └ <werkzeug.serving.WSGIRequestHandler object at 0x10d25e210>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 323, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x10d20b590>
    │       │    └ <werkzeug.serving.ThreadedWSGIServer object at 0x10d256e90>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x10d25e210>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x10d25a050>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/serving.py", line 314, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x10d2582d0>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/werkzeug/debug/__init__.py", line 304, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x10d255d40>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x10d20b590>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2464, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x10d255d40>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=10>, 'wsgi.errors': <_io.TextIOWra...
           │    └ <function Flask.wsgi_app at 0x10c901830>
           └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 2447, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x10c8feef0>
               └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1950, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x10c8fee60>
         └ <Flask 'app'>
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/flask/app.py", line 1936, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
           │    │              │    │           │   └ {}
           │    │              │    │           └ <Request 'http://127.0.0.1:5000/scenarios/read' [GET]>
           │    │              │    └ 'get_threat_scenario'
           │    │              └ <Rule '/scenarios/read' (OPTIONS, GET, POST, HEAD) -> get_threat_scenario>
           │    └ {'static': <bound method _PackageBoundObject.send_static_file of <Flask 'app'>>, 'mytest': <function mytest at 0x10d198710>, ...
           └ <Flask 'app'>

> File "/Users/tilakt/Documents/github/ThreatPlaybook/apiv2/tp_api/app.py", line 42, in inner
    decoded = jwt.decode(token, JWT_PASSWORD, algorithms=["HS256"])
              │   │      │      └ 'ye1hnJn1C-jcRm1xYxw85A'
              │   │      └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.N9REP0DwGxYXwgQ1EIAIwG_cHFNx3lXvCGievtCzj3Y'
              │   └ <bound method PyJWT.decode of <jwt.api_jwt.PyJWT object at 0x10c918390>>
              └ <module 'jwt' from '/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/__init__.py'>

  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jwt.py", line 92, in decode
    jwt, key=key, algorithms=algorithms, options=options, **kwargs
    │        │               │                   │          └ {}
    │        │               │                   └ {'verify_signature': True}
    │        │               └ ['HS256']
    │        └ 'ye1hnJn1C-jcRm1xYxw85A'
    └ 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJlbWFpbCI6ImFkbWluQGFkbWluLmNvbSJ9.N9REP0DwGxYXwgQ1EIAIwG_cHFNx3lXvCGievtCzj3Y'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 156, in decode
    key, algorithms)
    │    └ ['HS256']
    └ 'ye1hnJn1C-jcRm1xYxw85A'
  File "/Users/tilakt/Documents/github/ThreatPlaybook/venv/lib/python3.7/site-packages/jwt/api_jws.py", line 223, in _verify_signature
    raise InvalidSignatureError('Signature verification failed')
          └ <class 'jwt.exceptions.InvalidSignatureError'>

jwt.exceptions.InvalidSignatureError: Signature verification failed
2020-05-04 17:04:39.526 | INFO     | __main__:login:158 - User 'admin@admin.com' successfully logged in
